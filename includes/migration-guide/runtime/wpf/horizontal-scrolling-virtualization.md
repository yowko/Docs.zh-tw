### <a name="horizontal-scrolling-and-virtualization"></a><span data-ttu-id="0b9d7-101">水平捲動和虛擬化</span><span class="sxs-lookup"><span data-stu-id="0b9d7-101">Horizontal scrolling and virtualization</span></span>

|   |   |
|---|---|
|<span data-ttu-id="0b9d7-102">詳細資料</span><span class="sxs-lookup"><span data-stu-id="0b9d7-102">Details</span></span>|<span data-ttu-id="0b9d7-103">此變更會套用至以正交於主要捲動方向之方向執行自身虛擬化的 <xref:System.Windows.Controls.ItemsControl?displayProperty=name> (主要範例是 EnableColumnVirtualization=&quot;True&quot; 的 <xref:System.Windows.Controls.DataGrid?displayProperty=name>)。</span><span class="sxs-lookup"><span data-stu-id="0b9d7-103">This change applies to an <xref:System.Windows.Controls.ItemsControl?displayProperty=name> that does its own virtualization in the direction orthogonal to the main scrolling direction (the chief example is <xref:System.Windows.Controls.DataGrid?displayProperty=name> with EnableColumnVirtualization=&quot;True&quot;).</span></span>  <span data-ttu-id="0b9d7-104">某些水平捲動作業的結果已變更，產生的結果更直覺，且更類似於可比較的垂直作業的結果。</span><span class="sxs-lookup"><span data-stu-id="0b9d7-104">The outcome of certain horizontal scrolling operations has been changed to produce results that are more intuitive and more analogous to the results of comparable vertical operations.</span></span><p/><span data-ttu-id="0b9d7-105">這些作業包括 [捲動至此處] 和 [右邊緣]，以使用以滑鼠右鍵按一下水平捲軸所取得之功能表中的名稱。</span><span class="sxs-lookup"><span data-stu-id="0b9d7-105">The operations include &quot;Scroll Here&quot; and &quot;Right Edge&quot;, to use the names from the menu obtained by right-clicking a horizontal scrollbar.</span></span>  <span data-ttu-id="0b9d7-106">這兩個都會計算候選位移並呼叫 <xref:System.Windows.Controls.Primitives.IScrollInfo.SetHorizontalOffset(System.Double)>。</span><span class="sxs-lookup"><span data-stu-id="0b9d7-106">Both of these compute a candidate offset and call <xref:System.Windows.Controls.Primitives.IScrollInfo.SetHorizontalOffset(System.Double)>.</span></span><p/><span data-ttu-id="0b9d7-107">捲動至新的位移後，「此處」或「右邊緣」的定義可能已變更，因為最近取消虛擬化的內容已變更 <xref:System.Windows.Controls.Primitives.IScrollInfo.ExtentWidth?displayProperty=name> 的值。</span><span class="sxs-lookup"><span data-stu-id="0b9d7-107">After scrolling to the new offset, the notion of &quot;here&quot; or &quot;right edge&quot; may have changed because newly de-virtualized content has changed the value of <xref:System.Windows.Controls.Primitives.IScrollInfo.ExtentWidth?displayProperty=name>.</span></span><p/><span data-ttu-id="0b9d7-108">在 .NET Framework 4.6.2 之前，捲軸作業會直接使用候選位移，即使它可能已不再是「此處」或位於「右邊緣」。</span><span class="sxs-lookup"><span data-stu-id="0b9d7-108">Prior to .NET Framework 4.6.2, the scroll operation simply uses the candidate offset, even though it may not be &quot;here&quot; or at the &quot;right edge&quot; any more.</span></span>  <span data-ttu-id="0b9d7-109">這會導致類似捲動指標「反彈」的效果，以範例來說明最為合適。</span><span class="sxs-lookup"><span data-stu-id="0b9d7-109">This results in effects like &quot;bouncing&quot; the scroll thumb, best illustrated by example.</span></span> <span data-ttu-id="0b9d7-110">假設 <xref:System.Windows.Controls.DataGrid?displayProperty=name> 具有 ExtentWidth=1000 和 Width=200。</span><span class="sxs-lookup"><span data-stu-id="0b9d7-110">Suppose a <xref:System.Windows.Controls.DataGrid?displayProperty=name> has ExtentWidth=1000 and Width=200.</span></span>  <span data-ttu-id="0b9d7-111">捲動到「右邊緣」會使用候選位移 1000 - 200 = 800。</span><span class="sxs-lookup"><span data-stu-id="0b9d7-111">A scroll to &quot;Right Edge&quot; uses candidate offset 1000 - 200 = 800.</span></span>  <span data-ttu-id="0b9d7-112">捲動到該位移時，新的資料行會取消虛擬化；假設它們非常寬，因此 <xref:System.Windows.Controls.Primitives.IScrollInfo.ExtentWidth?displayProperty=name> 變更為 2000。</span><span class="sxs-lookup"><span data-stu-id="0b9d7-112">While scrolling to that offset, new columns are de- virtualized; let's suppose they are very wide, so that the <xref:System.Windows.Controls.Primitives.IScrollInfo.ExtentWidth?displayProperty=name> changes to 2000.</span></span>  <span data-ttu-id="0b9d7-113">捲軸在 HorizontalOffset=800 結束，而指標會「反彈」回到捲軸中央附近，精確來說是在 800/2000 等於 40% 的位置。</span><span class="sxs-lookup"><span data-stu-id="0b9d7-113">The scroll ends with HorizontalOffset=800, and the thumb &quot;bounces&quot; back to near the middle of the scrollbar - precisely at 800/2000 = 40%.</span></span><p/><span data-ttu-id="0b9d7-114">發生這種情況時，變更是重新計算新的候選位移，然後再試一次。</span><span class="sxs-lookup"><span data-stu-id="0b9d7-114">The change is to recompute a new candidate offset when this situation occurs, and try again.</span></span> <span data-ttu-id="0b9d7-115">(這是垂直捲動目前運作的方式)。</span><span class="sxs-lookup"><span data-stu-id="0b9d7-115">(This is how vertical scrolling works already.)</span></span> <p/><span data-ttu-id="0b9d7-116">此變更會為使用者產生更為可預測且直覺式的體驗，但它會影響依賴 <xref:System.Windows.Controls.Primitives.IScrollInfo.HorizontalOffset?displayProperty=name> 於水平捲動後 (無論是由使用者叫用或是明確呼叫 <xref:System.Windows.Controls.Primitives.IScrollInfo.SetHorizontalOffset(System.Double)>) 之確切值的所有應用程式。</span><span class="sxs-lookup"><span data-stu-id="0b9d7-116">The change produces a more predictable and intuitive experience for the end user, but it could also affect any app that depends on the exact value of <xref:System.Windows.Controls.Primitives.IScrollInfo.HorizontalOffset?displayProperty=name> after a horizontal scroll, whether invoked by the end user or by an explicit call to <xref:System.Windows.Controls.Primitives.IScrollInfo.SetHorizontalOffset(System.Double)>.</span></span>|
|<span data-ttu-id="0b9d7-117">建議</span><span class="sxs-lookup"><span data-stu-id="0b9d7-117">Suggestion</span></span>|<span data-ttu-id="0b9d7-118">在因為取消虛擬化而可能變更 <xref:System.Windows.Controls.Primitives.IScrollInfo.ExtentWidth?displayProperty=name> 的任何水平捲動之後，為 <xref:System.Windows.Controls.Primitives.IScrollInfo.HorizontalOffset?displayProperty=name> 使用預測值的應用程式應該改為擷取實際值 (以及 <xref:System.Windows.Controls.Primitives.IScrollInfo.ExtentWidth?displayProperty=name> 的值)。</span><span class="sxs-lookup"><span data-stu-id="0b9d7-118">An app that uses a predicted value for <xref:System.Windows.Controls.Primitives.IScrollInfo.HorizontalOffset?displayProperty=name> should be changed to fetch the actual value (and the value of <xref:System.Windows.Controls.Primitives.IScrollInfo.ExtentWidth?displayProperty=name>) after any horizontal scroll that could change <xref:System.Windows.Controls.Primitives.IScrollInfo.ExtentWidth?displayProperty=name> due to de-virtualization.</span></span>|
|<span data-ttu-id="0b9d7-119">範圍</span><span class="sxs-lookup"><span data-stu-id="0b9d7-119">Scope</span></span>|<span data-ttu-id="0b9d7-120">次要</span><span class="sxs-lookup"><span data-stu-id="0b9d7-120">Minor</span></span>|
|<span data-ttu-id="0b9d7-121">版本</span><span class="sxs-lookup"><span data-stu-id="0b9d7-121">Version</span></span>|<span data-ttu-id="0b9d7-122">4.6.2</span><span class="sxs-lookup"><span data-stu-id="0b9d7-122">4.6.2</span></span>|
|<span data-ttu-id="0b9d7-123">類型</span><span class="sxs-lookup"><span data-stu-id="0b9d7-123">Type</span></span>|<span data-ttu-id="0b9d7-124">執行階段</span><span class="sxs-lookup"><span data-stu-id="0b9d7-124">Runtime</span></span>|
|<span data-ttu-id="0b9d7-125">受影響的 API</span><span class="sxs-lookup"><span data-stu-id="0b9d7-125">Affected APIs</span></span>|<ul><li><xref:System.Windows.Controls.Primitives.IScrollInfo?displayProperty=nameWithType></li></ul>|

