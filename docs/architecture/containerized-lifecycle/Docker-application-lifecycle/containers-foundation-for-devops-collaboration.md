---
title: 作為 DevOps 共同作業基礎的容器
description: 了解容器用以簡化 DevOps 的重要角色。
ms.date: 02/15/2019
ms.openlocfilehash: 37faf00f270414df363f36894317f31f81a2937e
ms.sourcegitcommit: f20dd18dbcf2275513281f5d9ad7ece6a62644b4
ms.translationtype: HT
ms.contentlocale: zh-TW
ms.lasthandoff: 07/30/2019
ms.locfileid: "68672765"
---
# <a name="containers-as-the-foundation-for-devops-collaboration"></a><span data-ttu-id="77d84-103">作為 DevOps 共同作業基礎的容器</span><span class="sxs-lookup"><span data-stu-id="77d84-103">Containers as the foundation for DevOps collaboration</span></span>

<span data-ttu-id="77d84-104">依據容器和 Docker 技術的本質，開發人員可以輕鬆地與 IT 營運及生產環境共用其軟體和相依性時，同時消除一般「它在我的電腦上運行」的藉口。</span><span class="sxs-lookup"><span data-stu-id="77d84-104">By the very nature of the containers and Docker technology, developers can share their software and dependencies easily with IT operations and production environments while eliminating the typical "it works on my machine" excuse.</span></span> <span data-ttu-id="77d84-105">容器可解決不同環境之間的應用程式衝突。</span><span class="sxs-lookup"><span data-stu-id="77d84-105">Containers solve application conflicts between different environments.</span></span> <span data-ttu-id="77d84-106">容器和 Docker 間接地將人員和 IT 營運更緊密地結合在一起，使其能夠輕鬆且有效率地共同作業。</span><span class="sxs-lookup"><span data-stu-id="77d84-106">Indirectly, containers and Docker bring developers and IT operations closer together, making it easier for them to collaborate effectively.</span></span> <span data-ttu-id="77d84-107">採用容器工作流程可為許多客戶提供他們所尋求，但之前必須透過更複雜發行和建置管線組態實作的 DevOps 持續性。</span><span class="sxs-lookup"><span data-stu-id="77d84-107">Adopting the container workflow provides many customers with the DevOps continuity they've sought but previously had to implement via more complex configuration for release and build pipelines.</span></span> <span data-ttu-id="77d84-108">容器會簡化 DevOps 中的建置/測試/部署管線。</span><span class="sxs-lookup"><span data-stu-id="77d84-108">Containers simplify the build/test/deploy pipelines in DevOps.</span></span>

![Docker 可協助在開發/設計工作負載的開發人員和架構設計人員與執行/監視/管理工作負載的 IT 營運之間建立橋接](./media/image1.png)

<span data-ttu-id="77d84-110">**圖 2-1。**</span><span class="sxs-lookup"><span data-stu-id="77d84-110">**Figure 2-1.**</span></span> <span data-ttu-id="77d84-111">容器化 Docker 應用程式生命週期中每個「角色」的主要工作負載</span><span class="sxs-lookup"><span data-stu-id="77d84-111">Main workloads per "personas" in the life cycle for containerized Docker applications</span></span>

<span data-ttu-id="77d84-112">透過 Docker 容器，開發人員擁有容器的內容 (應用程式和服務，以及對架構和元件的相依性)，以及容器和服務作為服務集合所組成應用程式一起運作的方式。</span><span class="sxs-lookup"><span data-stu-id="77d84-112">With Docker containers, developers own what's within the container (application and service, and dependencies to frameworks and components) and how the containers and services behave together as an application composed by a collection of services.</span></span> <span data-ttu-id="77d84-113">多個容器的交互相依性定義在 `docker-compose.yml` 檔案 (也可以稱為「部署資訊清單」  ) 中。</span><span class="sxs-lookup"><span data-stu-id="77d84-113">The interdependencies of the multiple containers are defined in a `docker-compose.yml` file, or what could be called a *deployment manifest*.</span></span> <span data-ttu-id="77d84-114">同時，IT 營運小組 (IT 專業人員和管理人員) 可以專注在生產環境的管理；基礎結構、延展性、監視；以及最終確保應用程式正確傳遞給終端使用者，而不需要知道各種容器的內容。</span><span class="sxs-lookup"><span data-stu-id="77d84-114">Meanwhile, IT operations teams (IT professionals and management) can focus on the management of production environments; infrastructure; scalability; monitoring; and, ultimately, ensuring that the applications are delivering properly for the end users, without having to know the contents of the various containers.</span></span> <span data-ttu-id="77d84-115">因此，「容器」這個名稱可聯想到真實世界運送容器的比喻。</span><span class="sxs-lookup"><span data-stu-id="77d84-115">Hence, the name "container," recalling the analogy to real-world shipping containers.</span></span> <span data-ttu-id="77d84-116">所以，容器內容擁有者不需要考慮運送容器的方式，運輸公司會將容器從其源點運輸至其目的地，而不需要知道或在意內容。</span><span class="sxs-lookup"><span data-stu-id="77d84-116">Thus, the owners of a container's content need not concern themselves with how the container will be shipped, and the shipping company transports a container from its point of origin to its destination without knowing or caring about the contents.</span></span> <span data-ttu-id="77d84-117">透過類似方式，開發人員可以建立並擁有 Docker 容器的內容，而不需要顧慮「傳輸」機制。</span><span class="sxs-lookup"><span data-stu-id="77d84-117">In a similar manner, developers can create and own the contents within a Docker container without the need to concern themselves with the "transport" mechanisms.</span></span>

<span data-ttu-id="77d84-118">在圖 2-1 的左側支柱部分，開發人員使用適用於 Windows 或 Mac 的 Docker，在本機的 Docker 容器中撰寫及執行程式碼。</span><span class="sxs-lookup"><span data-stu-id="77d84-118">In the pillar on the left side of Figure 2-1, developers write and run code locally in Docker containers by using Docker for Windows or Mac.</span></span> <span data-ttu-id="77d84-119">他們透過使用 Dockerfile 來定義程式碼的作業環境，該 Dockerfile 會指定要執行的基底作業系統，以及將其程式碼建置成 Docker 映像的建置步驟。</span><span class="sxs-lookup"><span data-stu-id="77d84-119">They define the operating environment for the code by using a Dockerfile that specifies the base operating system to run as well as the build steps for building their code into a Docker image.</span></span> <span data-ttu-id="77d84-120">開發人員定義一或多個映像如何使用上述的 `docker-compose.yml` 檔案部署資訊清單來交互操作。</span><span class="sxs-lookup"><span data-stu-id="77d84-120">The developers define how one or more images will interoperate using the aforementioned `docker-compose.yml` file deployment manifest.</span></span> <span data-ttu-id="77d84-121">當他們完成其本機開發時，就會將其應用程式程式碼加上 Docker 組態檔推送至他們選擇的程式碼存放庫 (也就是 Git 存放庫)。</span><span class="sxs-lookup"><span data-stu-id="77d84-121">As they complete their local development, they push their application code plus the Docker configuration files to the code repository of their choice (that is, Git repository).</span></span>

<span data-ttu-id="77d84-122">DevOps 支柱部分使用程式碼存放庫中提供的 Dockerfile 定義組建 – 持續整合 (CI) 管線。</span><span class="sxs-lookup"><span data-stu-id="77d84-122">The DevOps pillar defines the build–Continuous Integration (CI) pipelines using the Dockerfile provided in the code repository.</span></span> <span data-ttu-id="77d84-123">CI 系統會從選取的 Docker 登錄中提取基底容器映像，並為應用程式建置自訂的 Docker 映像。</span><span class="sxs-lookup"><span data-stu-id="77d84-123">The CI system pulls the base container images from the selected Docker registry and builds the custom Docker images for the application.</span></span> <span data-ttu-id="77d84-124">接著會驗證這些映像，並將其推送至用於部署到多個環境的 Docker 登錄。</span><span class="sxs-lookup"><span data-stu-id="77d84-124">The images then are validated and pushed to the Docker registry used for the deployments to multiple environments.</span></span>

<span data-ttu-id="77d84-125">在右側的支柱部分，營運小組管理生產環境中部署的應用程式和基礎結構，同時監視該環境和應用程式，讓他們能夠將有關如何改善應用程式的意見反應和見解提供給開發小組。</span><span class="sxs-lookup"><span data-stu-id="77d84-125">In the pillar on the right, operations teams manage deployed applications and infrastructure in production while monitoring the environment and applications so that they can provide feedback and insights to the development team about how the application might be improved.</span></span> <span data-ttu-id="77d84-126">容器應用程式通常會使用容器協調器在生產環境中執行。</span><span class="sxs-lookup"><span data-stu-id="77d84-126">Container apps are typically run in production using container orchestrators.</span></span>

<span data-ttu-id="77d84-127">兩個小組正透過提供關注點分離作為協議的基礎平台 (Docker 容器) 進行共同作業，同時大幅改善兩個小組在應用程式生命週期中的共同作業。</span><span class="sxs-lookup"><span data-stu-id="77d84-127">The two teams are collaborating through a foundational platform (Docker containers) that provides a separation of concerns as a contract, while greatly improving the two teams' collaboration in the application life cycle.</span></span> <span data-ttu-id="77d84-128">開發人員擁有容器內容、其作業環境和容器交互相依性，而營運小組會採用建置的映像以及資訊清單，並在其協調流程系統中加以執行。</span><span class="sxs-lookup"><span data-stu-id="77d84-128">The developers own the container contents, its operating environment, and the container interdependencies, whereas the operations teams take the built images along with the manifest and runs them in their orchestration system.</span></span>

## <a name="challenges-in-application-life-cycle-when-using-docker"></a><span data-ttu-id="77d84-129">使用 Docker 時，應用程式生命週期中所面臨的挑戰。</span><span class="sxs-lookup"><span data-stu-id="77d84-129">Challenges in application life cycle when using Docker.</span></span>

<span data-ttu-id="77d84-130">將在未來幾年中增加容器化應用程式的數目有許多原因，其中之一是根據微服務建立應用程式。</span><span class="sxs-lookup"><span data-stu-id="77d84-130">There are many reasons that will increase the number of containerized applications in the upcoming years, and one of these reasons is the creation of applications based on microservices.</span></span>

<span data-ttu-id="77d84-131">在過去 15 年中，使用 Web 服務已成為數千個應用程式的基礎，且也許在幾年之後，我們會發現 Docker 容器上執行的微服務架構應用程式具有相同情況。</span><span class="sxs-lookup"><span data-stu-id="77d84-131">During the last 15 years, the use of web services has been the base of thousands of applications, and probably, after a few years, we'll find the same situation with microservice-based applications running on Docker containers.</span></span>

<span data-ttu-id="77d84-132">另外值得一提的是，您也可以將 Docker 容器用於整合型應用程式，且仍然可以獲得大部分的 Docker 優點。</span><span class="sxs-lookup"><span data-stu-id="77d84-132">It is also worth to mention that you can also use Docker containers for monolithic applications and you still get most of the benefits of Docker.</span></span> <span data-ttu-id="77d84-133">容器不僅僅以微服務為目標。</span><span class="sxs-lookup"><span data-stu-id="77d84-133">Containers are not targeting only microservices.</span></span>

<span data-ttu-id="77d84-134">使用 Docker 容器化和微服務會為您組織的開發過程帶來新挑戰；因此，您需要紮實策略來維護生產系統上執行的許多容器和微服務。</span><span class="sxs-lookup"><span data-stu-id="77d84-134">The use of Docker containerization and microservices causes new challenges in the development process of your organizations and therefore, you need a solid strategy to maintain many containers and microservices running on production systems.</span></span> <span data-ttu-id="77d84-135">最後，企業應用程式會在生產環境中執行數百或數千個容器/執行個體。</span><span class="sxs-lookup"><span data-stu-id="77d84-135">Eventually, enterprise applications will have hundreds or thousands of containers/instances running in production.</span></span>

<span data-ttu-id="77d84-136">這些挑戰會在使用 DevOps 工具時產生新的需求，因此您必須在 DevOps 活動中定義新的處理序，並找到這類問題的解答：</span><span class="sxs-lookup"><span data-stu-id="77d84-136">These challenges create new demands when using DevOps tools, so you'll have to define new processes in your DevOps activities, and find answers for this type of questions:</span></span>

- <span data-ttu-id="77d84-137">我可以使用哪些工具進行開發、CI/CD、管理及操作？</span><span class="sxs-lookup"><span data-stu-id="77d84-137">Which tools can I use for development, for CI/CD, management and operations?</span></span>

- <span data-ttu-id="77d84-138">公司要如何管理在生產環境中執行之容器的錯誤？</span><span class="sxs-lookup"><span data-stu-id="77d84-138">How can my company manage errors in containers when running in production?</span></span>

- <span data-ttu-id="77d84-139">我們要如何以最短停機時間變更軟體在生產環境中的部分？</span><span class="sxs-lookup"><span data-stu-id="77d84-139">How can we change pieces of our software in production with minimum downtime?</span></span>

- <span data-ttu-id="77d84-140">我們要如何調整及監視生產系統？</span><span class="sxs-lookup"><span data-stu-id="77d84-140">How can we scale and how can we monitor our production system?</span></span>

- <span data-ttu-id="77d84-141">我們要如何在發行管線中包含容器的測試和部署？</span><span class="sxs-lookup"><span data-stu-id="77d84-141">How can we include testing and deployment of containers in our release pipeline?</span></span>

- <span data-ttu-id="77d84-142">我們要如何在 Microsoft Azure 中針對容器使用開放原始碼工具/平台？</span><span class="sxs-lookup"><span data-stu-id="77d84-142">How can we use Open Source tools/platforms for containers in Microsoft Azure?</span></span>

<span data-ttu-id="77d84-143">如果您可以回答所有這些問題，就表示您充分準備好將您的應用程式 (現有或新的應用程式) 移到 Docker 容器。</span><span class="sxs-lookup"><span data-stu-id="77d84-143">If you can answer all those questions, you'll be better prepared to move your applications (existing or new apps) to Docker containers.</span></span> 

## <a name="introduction-to-a-generic-end-to-end-docker-application-life-cycle-workflow"></a><span data-ttu-id="77d84-144">泛型端對端 Docker 應用程式生命週期工作流程簡介</span><span class="sxs-lookup"><span data-stu-id="77d84-144">Introduction to a generic end-to-end Docker application life cycle workflow</span></span>

<span data-ttu-id="77d84-145">圖 2-2 呈現更詳細的 Docker 應用程式生命週期工作流程，這個執行個體將聚焦於特定的 DevOps 活動和資產。</span><span class="sxs-lookup"><span data-stu-id="77d84-145">Figure 2-2 presents a more detailed workflow for a Docker application life cycle, focusing in this instance on specific DevOps activities and assets.</span></span>

![此圖顯示 DevOps 的「外部迴圈」。](./media/image2.png)

<span data-ttu-id="77d84-149">**圖 2-2.**</span><span class="sxs-lookup"><span data-stu-id="77d84-149">**Figure 2-2.**</span></span> <span data-ttu-id="77d84-150">Docker 容器化應用程式生命週期的高階工作流程</span><span class="sxs-lookup"><span data-stu-id="77d84-150">High-level workflow for the Docker containerized application life cycle</span></span>

<span data-ttu-id="77d84-151">一切都從開發人員開始，該人員會在內部迴圈工作流程中開始撰寫程式碼。</span><span class="sxs-lookup"><span data-stu-id="77d84-151">Everything begins with the developer, who starts writing code in the inner-loop workflow.</span></span> <span data-ttu-id="77d84-152">內部迴圈階段可讓開發人員定義將程式碼推送至程式碼存放庫 (例如，Git 之類的原始檔控制系統) 之前發生的所有作業。</span><span class="sxs-lookup"><span data-stu-id="77d84-152">The inner-loop stage is where developers define everything that happens before pushing code into the code repository (for example, a source control system such as Git).</span></span> <span data-ttu-id="77d84-153">在認可它之後，存放庫會觸發持續整合 (CI) 和工作流程的其餘部分。</span><span class="sxs-lookup"><span data-stu-id="77d84-153">After it's committed, the repository triggers Continuous Integration (CI) and the rest of the workflow.</span></span>

<span data-ttu-id="77d84-154">內部迴圈基本上包含「撰寫程式碼」、「執行」、「測試」及「偵錯」等一般步驟，再加上於本機執行應用程式之前所需的其他步驟。</span><span class="sxs-lookup"><span data-stu-id="77d84-154">The inner loop basically consists of typical steps like "code," "run," "test," and "debug," plus the additional steps needed right before running the app locally.</span></span> <span data-ttu-id="77d84-155">這是開發人員執行和測試應用程式作為 Docker 容器的流程。</span><span class="sxs-lookup"><span data-stu-id="77d84-155">This is the developer's process to run and test the app as a Docker container.</span></span> <span data-ttu-id="77d84-156">內部迴圈工作流程將會在下列各節中說明。</span><span class="sxs-lookup"><span data-stu-id="77d84-156">The inner-loop workflow will be explained in the sections that follow.</span></span>

<span data-ttu-id="77d84-157">回頭來看看端對端工作流程，DevOps 工作流程不僅僅是一項技術或一個工具組：它是一種需要文化特性演進的思維。</span><span class="sxs-lookup"><span data-stu-id="77d84-157">Taking a step back to look at the end-to end workflow, the DevOps workflow is more than a technology or a tool set: it's a mindset that requires cultural evolution.</span></span> <span data-ttu-id="77d84-158">它的人員、處理序及適當工具可讓應用程式生命週期更快速且更容易預測。</span><span class="sxs-lookup"><span data-stu-id="77d84-158">It's people, processes, and the appropriate tools to make your application life cycle faster and more predictable.</span></span> <span data-ttu-id="77d84-159">採用容器化工作流程的企業通常會重新建構其組織，以表示與容器化工作流程相符的人員和處理序。</span><span class="sxs-lookup"><span data-stu-id="77d84-159">Enterprises that adopt a containerized workflow typically restructure their organizations to represent people and processes that match the containerized workflow.</span></span>

<span data-ttu-id="77d84-160">實踐 DevOps 可協助小組更快地一同因應競爭壓力，做法是以自動化功能取代容易出錯的手動處理序，進而改善可追蹤性和可重複的工作流程。</span><span class="sxs-lookup"><span data-stu-id="77d84-160">Practicing DevOps can help teams respond faster together to competitive pressures by replacing error-prone manual processes with automation, which results in improved traceability and repeatable workflows.</span></span> <span data-ttu-id="77d84-161">透過內部部署與雲端資源組合以及緊密整合的工具，組織也可以更有效率地管理環境和實現成本節約。</span><span class="sxs-lookup"><span data-stu-id="77d84-161">Organizations also can manage environments more efficiently and realize cost savings with a combination of on-premises and cloud resources as well as tightly integrated tooling.</span></span>

<span data-ttu-id="77d84-162">針為 Docker 應用程式實作 DevOps 工作流程時，您會看到 Docker 技術幾乎存在於工作流程的每個階段，從在內部迴圈 (撰寫程式碼、執行、偵錯) 工作時的開發環境、建置/測試/CI 階段，以及最後將這些容器部署到預備和生產環境的作業。</span><span class="sxs-lookup"><span data-stu-id="77d84-162">When implementing your DevOps workflow for Docker applications, you'll see that Docker technologies are present in almost every stage of the workflow, from your development box while working in the inner loop (code, run, debug), the build-test-CI phase, and, finally, the deployment of those containers to the staging and production environments.</span></span>

<span data-ttu-id="77d84-163">改善品質實務有助於在開發週期中及早發現缺失，進而減少修正這些缺失的成本。</span><span class="sxs-lookup"><span data-stu-id="77d84-163">Improvement of quality practices helps to identify defects early in the development cycle, which reduces the cost of fixing them.</span></span> <span data-ttu-id="77d84-164">透過在映像中包含環境和相依性，並採用在多個環境中部署相同映像的原理，您可以提升擷取環境特定組態的專業領域，讓部署更加可靠。</span><span class="sxs-lookup"><span data-stu-id="77d84-164">By including the environment and dependencies in the image and adopting a philosophy of deploying the same image across multiple environments, you promote a discipline of extracting the environment-specific configurations making deployments more reliable.</span></span>

<span data-ttu-id="77d84-165">透過有效檢測 (監視和診斷) 所取得的豐富資料可提供效能問題和使用者行為的見解，進而引導未來的優先順序和投資。</span><span class="sxs-lookup"><span data-stu-id="77d84-165">Rich data obtained through effective instrumentation (monitoring and diagnostics) provides insight into performance issues and user behavior to guide future priorities and investments.</span></span>

<span data-ttu-id="77d84-166">DevOps 應該被視為旅程，而不是目的地。</span><span class="sxs-lookup"><span data-stu-id="77d84-166">DevOps should be considered a journey, not a destination.</span></span> <span data-ttu-id="77d84-167">它應該透過適當範圍的專案逐步實作，而您可以從這些專案展現成就、學習和發展。</span><span class="sxs-lookup"><span data-stu-id="77d84-167">It should be implemented incrementally through appropriately scoped projects from which you can demonstrate success, learn, and evolve.</span></span>

## <a name="benefits-of-devops-for-containerized-applications"></a><span data-ttu-id="77d84-168">DevOps 為容器化應用程式提供的優點</span><span class="sxs-lookup"><span data-stu-id="77d84-168">Benefits of DevOps for containerized applications</span></span>

<span data-ttu-id="77d84-169">以下是 DevOps 穩固工作流程所提供的一些最重要優點：</span><span class="sxs-lookup"><span data-stu-id="77d84-169">Here are some of the most important benefits provided by a solid DevOps workflow:</span></span>

- <span data-ttu-id="77d84-170">更快且以更高的相容性提供更高品質軟體。</span><span class="sxs-lookup"><span data-stu-id="77d84-170">Deliver better-quality software, faster and with better compliance.</span></span>

- <span data-ttu-id="77d84-171">更早且以更經濟實惠的方式推動持續改善和調整。</span><span class="sxs-lookup"><span data-stu-id="77d84-171">Drive continuous improvement and adjustments earlier and more economically.</span></span>

- <span data-ttu-id="77d84-172">提高傳遞和操作軟體所涉及之專案關係人之間的透明度和共同作業。</span><span class="sxs-lookup"><span data-stu-id="77d84-172">Increase transparency and collaboration among stakeholders involved in delivering and operating software.</span></span>

- <span data-ttu-id="77d84-173">控制成本並更有效地利用佈建的資源，同時將安全性風險降至最低。</span><span class="sxs-lookup"><span data-stu-id="77d84-173">Control costs and utilize provisioned resources more effectively while minimizing security risks.</span></span>

- <span data-ttu-id="77d84-174">妥善運用許多現有的 DevOps 投資，包括對開放原始碼的投資。</span><span class="sxs-lookup"><span data-stu-id="77d84-174">Plug and play well with many of your existing DevOps investments, including investments in open-source.</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="77d84-175">[上一頁](index.md)
>[下一頁](../Microsoft-platform-tools-containerized-apps/index.md)</span><span class="sxs-lookup"><span data-stu-id="77d84-175">[Previous](index.md)
[Next](../Microsoft-platform-tools-containerized-apps/index.md)</span></span>
