---
title: 匯出 WCF 擴充的自訂中繼資料
ms.date: 03/30/2017
ms.assetid: 53c93882-f8ba-4192-965b-787b5e3f09c0
ms.openlocfilehash: c2ae547f10e96a1fdc16fc428e98145fc81c59d5
ms.sourcegitcommit: 15109844229ade1c6449f48f3834db1b26907824
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 05/07/2018
---
# <a name="exporting-custom-metadata-for-a-wcf-extension"></a><span data-ttu-id="b0d57-102">匯出 WCF 擴充的自訂中繼資料</span><span class="sxs-lookup"><span data-stu-id="b0d57-102">Exporting Custom Metadata for a WCF Extension</span></span>
<span data-ttu-id="b0d57-103">在 Windows Communication Foundation (WCF) 中，中繼資料匯出是描述服務端點，並將其投射至並行標準化表示法，用戶端可用來了解如何使用服務的程序。</span><span class="sxs-lookup"><span data-stu-id="b0d57-103">In Windows Communication Foundation (WCF), metadata export is the process of describing service endpoints and projecting them into a parallel, standardized representation that clients can use to understand how to use the service.</span></span> <span data-ttu-id="b0d57-104">自訂中繼資料包含系統提供之中繼資料匯出工具所無法匯出的 XML 項目。</span><span class="sxs-lookup"><span data-stu-id="b0d57-104">Custom metadata consists of XML elements that the system-provided metadata exporters cannot export.</span></span> <span data-ttu-id="b0d57-105">通常這包括使用者定義行為的自訂 WSDL 項目和繫結項目，以及有關繫結與合約功能和需求的原則判斷提示。</span><span class="sxs-lookup"><span data-stu-id="b0d57-105">Typically, this includes custom WSDL elements for user-defined behaviors and binding elements and policy assertions about the capabilities and requirements of bindings and contracts.</span></span>  
  
 <span data-ttu-id="b0d57-106">本章節將說明匯出自訂 WSDL 或原則判斷提示，但重點不會放在匯出程序本身。</span><span class="sxs-lookup"><span data-stu-id="b0d57-106">This section describes exporting custom WSDL or policy assertions, and does not focus on the exporting process itself.</span></span> <span data-ttu-id="b0d57-107">如需如何使用匯出和匯入中繼資料，不論中繼資料是自訂或系統建構的類型的詳細資訊，請參閱[匯出和匯入中繼資料](../../../../docs/framework/wcf/feature-details/exporting-and-importing-metadata.md)。</span><span class="sxs-lookup"><span data-stu-id="b0d57-107">For more information about how to use the types that export and import metadata regardless of whether the metadata is custom or system-constructed, see [Exporting and Importing Metadata](../../../../docs/framework/wcf/feature-details/exporting-and-importing-metadata.md).</span></span>  
  
## <a name="overview"></a><span data-ttu-id="b0d57-108">總覽</span><span class="sxs-lookup"><span data-stu-id="b0d57-108">Overview</span></span>  
 <span data-ttu-id="b0d57-109">發行中繼資料使用<xref:System.ServiceModel.Description.ServiceMetadataBehavior?displayProperty=nameWithType>、<xref:System.ServiceModel.Description.ServiceDescription?displayProperty=nameWithType>會檢查並為所有合約和 WCF 可以支援使用系統提供的屬性和繫結的繫結產生 XSD 和 WSDL （包括原則判斷提示）。</span><span class="sxs-lookup"><span data-stu-id="b0d57-109">When metadata is published using the <xref:System.ServiceModel.Description.ServiceMetadataBehavior?displayProperty=nameWithType>, the <xref:System.ServiceModel.Description.ServiceDescription?displayProperty=nameWithType> is examined and XSD and WSDL -- including policy assertions -- are generated for all contracts and bindings that WCF can support using system-provided attributes and bindings.</span></span> <span data-ttu-id="b0d57-110">不過，必須支援自訂行為屬性或繫結項目，才能將它們正確匯出。</span><span class="sxs-lookup"><span data-stu-id="b0d57-110">However, custom behavior attributes or binding elements require support before they can be exported properly.</span></span>  
  
 <span data-ttu-id="b0d57-111">本章節內容：</span><span class="sxs-lookup"><span data-stu-id="b0d57-111">This section describes:</span></span>  
  
1.  <span data-ttu-id="b0d57-112">如何實作和使用 <xref:System.ServiceModel.Description.IWsdlExportExtension?displayProperty=nameWithType> 介面，該介面會在發行 WSDL 之前先對您公開 WSDL 產生的資料。</span><span class="sxs-lookup"><span data-stu-id="b0d57-112">How to implement and use the <xref:System.ServiceModel.Description.IWsdlExportExtension?displayProperty=nameWithType> interface, which exposes the WSDL generation data to you prior to publishing the WSDL.</span></span>  
  
2.  <span data-ttu-id="b0d57-113">如何實作和使用 <xref:System.ServiceModel.Description.IPolicyExportExtension?displayProperty=nameWithType> 介面，該介面會在匯出 WSDL 資料中的原則判斷提示之前先對您公開原則資料。</span><span class="sxs-lookup"><span data-stu-id="b0d57-113">How to implement and use the <xref:System.ServiceModel.Description.IPolicyExportExtension?displayProperty=nameWithType> interface, which exposes the policy data to you prior to exporting the policy assertions in WSDL data.</span></span>  
  
 <span data-ttu-id="b0d57-114">如需有關匯入自訂 WSDL 和原則判斷提示的詳細資訊，請參閱[WCF 延伸模組匯入自訂中繼資料](../../../../docs/framework/wcf/extending/importing-custom-metadata-for-a-wcf-extension.md)。</span><span class="sxs-lookup"><span data-stu-id="b0d57-114">For more information about importing custom WSDL and policy assertions, see [Importing Custom Metadata for a WCF Extension](../../../../docs/framework/wcf/extending/importing-custom-metadata-for-a-wcf-extension.md).</span></span>  
  
## <a name="exporting-custom-wsdl-elements"></a><span data-ttu-id="b0d57-115">匯出自訂 WSDL 項目</span><span class="sxs-lookup"><span data-stu-id="b0d57-115">Exporting Custom WSDL Elements</span></span>  
 <span data-ttu-id="b0d57-116">在作業行為、合約行為、端點行為或繫結項目 (分別為 <xref:System.ServiceModel.Description.IWsdlExportExtension>、<xref:System.ServiceModel.Description.IOperationBehavior>、<xref:System.ServiceModel.Description.IContractBehavior> 或 <xref:System.ServiceModel.Description.IEndpointBehavior>) 上實作 <xref:System.ServiceModel.Channels.BindingElement?displayProperty=nameWithType>，並且將行為或繫結項目插入您嘗試匯出的服務描述中。</span><span class="sxs-lookup"><span data-stu-id="b0d57-116">Implement the <xref:System.ServiceModel.Description.IWsdlExportExtension> on an operation behavior, contract behavior, endpoint behavior or binding element (<xref:System.ServiceModel.Description.IOperationBehavior>, <xref:System.ServiceModel.Description.IContractBehavior>, <xref:System.ServiceModel.Description.IEndpointBehavior>, or <xref:System.ServiceModel.Channels.BindingElement?displayProperty=nameWithType> respectively) and insert the behaviors or binding elements into the description of the service that you are trying to export.</span></span> <span data-ttu-id="b0d57-117">(如需插入行為的詳細資訊，請參閱[設定與擴充執行階段行為](../../../../docs/framework/wcf/extending/configuring-and-extending-the-runtime-with-behaviors.md))。</span><span class="sxs-lookup"><span data-stu-id="b0d57-117">(For more information about inserting behaviors, see [Configuring and Extending the Runtime with Behaviors](../../../../docs/framework/wcf/extending/configuring-and-extending-the-runtime-with-behaviors.md)).</span></span> <span data-ttu-id="b0d57-118"><xref:System.ServiceModel.Description.IWsdlExportExtension> 會針對每個端點呼叫，而且每個端點會先匯出合約 (如果合約尚未匯出的話)。</span><span class="sxs-lookup"><span data-stu-id="b0d57-118">The <xref:System.ServiceModel.Description.IWsdlExportExtension> is called for each endpoint and each endpoint exports the contract first if it has not already been exported.</span></span> <span data-ttu-id="b0d57-119">您可以根據需要參與任一個匯出程序：</span><span class="sxs-lookup"><span data-stu-id="b0d57-119">You can participate in either export process, depending upon your needs:</span></span>  
  
-   <span data-ttu-id="b0d57-120">使用 <xref:System.ServiceModel.Description.WsdlContractConversionContext> 修改 <xref:System.ServiceModel.Description.IWsdlExportExtension.ExportContract%2A> 方法中匯出的中繼資料。</span><span class="sxs-lookup"><span data-stu-id="b0d57-120">Use the <xref:System.ServiceModel.Description.WsdlContractConversionContext> to modify the exported metadata in the <xref:System.ServiceModel.Description.IWsdlExportExtension.ExportContract%2A> method.</span></span>  
  
-   <span data-ttu-id="b0d57-121">使用 <xref:System.ServiceModel.Description.WsdlEndpointConversionContext> 修改 <xref:System.ServiceModel.Description.IWsdlExportExtension.ExportEndpoint%2A> 方法中匯出的端點中繼資料。</span><span class="sxs-lookup"><span data-stu-id="b0d57-121">Use the <xref:System.ServiceModel.Description.WsdlEndpointConversionContext> to modify the exported metadata for the endpoint in the <xref:System.ServiceModel.Description.IWsdlExportExtension.ExportEndpoint%2A> method.</span></span>  
  
 <span data-ttu-id="b0d57-122"><xref:System.ServiceModel.Description.IWsdlExportExtension.ExportContract%2A> 方法會在匯出的 <xref:System.ServiceModel.Description.IWsdlExportExtension> 執行個體內所有 <xref:System.ServiceModel.Description.ContractDescription?displayProperty=nameWithType> 實作上呼叫。</span><span class="sxs-lookup"><span data-stu-id="b0d57-122">The <xref:System.ServiceModel.Description.IWsdlExportExtension.ExportContract%2A> method is called on all <xref:System.ServiceModel.Description.IWsdlExportExtension> implementations within the <xref:System.ServiceModel.Description.ContractDescription?displayProperty=nameWithType> instance that is being exported.</span></span>  <span data-ttu-id="b0d57-123"><xref:System.ServiceModel.Description.IWsdlExportExtension.ExportEndpoint%2A> 方法會在包含匯出的 <xref:System.ServiceModel.Description.IWsdlExportExtension> 執行個體之所有 <xref:System.ServiceModel.Description.ServiceEndpoint?displayProperty=nameWithType> 實作上呼叫。</span><span class="sxs-lookup"><span data-stu-id="b0d57-123">The <xref:System.ServiceModel.Description.IWsdlExportExtension.ExportEndpoint%2A> method is called on all <xref:System.ServiceModel.Description.IWsdlExportExtension> implementations with the <xref:System.ServiceModel.Description.ServiceEndpoint?displayProperty=nameWithType> instance that is being exported.</span></span>  
  
 <span data-ttu-id="b0d57-124">如需詳細資訊，請參閱[How to： 匯出自訂 WSDL](../../../../docs/framework/wcf/extending/how-to-export-custom-wsdl.md)和範例[自訂 WSDL 發行物](../../../../docs/framework/wcf/samples/custom-wsdl-publication.md)。</span><span class="sxs-lookup"><span data-stu-id="b0d57-124">For more information, see [How to: Export Custom WSDL](../../../../docs/framework/wcf/extending/how-to-export-custom-wsdl.md) and the sample [Custom WSDL Publication](../../../../docs/framework/wcf/samples/custom-wsdl-publication.md).</span></span>  
  
## <a name="exporting-custom-policy-assertions"></a><span data-ttu-id="b0d57-125">匯出自訂原則判斷提示</span><span class="sxs-lookup"><span data-stu-id="b0d57-125">Exporting Custom Policy Assertions</span></span>  
 <span data-ttu-id="b0d57-126">在 <xref:System.ServiceModel.Description.IPolicyExportExtension><xref:System.ServiceModel.Channels.BindingElement>上實作 ，並將繫結項目加入至繫結，以便將有關繫結支援和合約功能的自訂原則判斷提示寫入 WSDL。</span><span class="sxs-lookup"><span data-stu-id="b0d57-126">Implement the <xref:System.ServiceModel.Description.IPolicyExportExtension> on a <xref:System.ServiceModel.Channels.BindingElement> and add the binding element to the binding to write custom policy assertions about binding support and contract capabilities into the WSDL.</span></span> <span data-ttu-id="b0d57-127"><xref:System.ServiceModel.Description.IPolicyExportExtension> 會在匯出繫結中之實作的繫結項目時呼叫一次，並且將 <xref:System.ServiceModel.Description.PolicyConversionContext> 傳遞至 <xref:System.ServiceModel.Description.IPolicyExportExtension.ExportPolicy%2A> 方法。</span><span class="sxs-lookup"><span data-stu-id="b0d57-127">The <xref:System.ServiceModel.Description.IPolicyExportExtension> is called once when exporting the implemented binding element in a binding and passes the <xref:System.ServiceModel.Description.PolicyConversionContext> to the <xref:System.ServiceModel.Description.IPolicyExportExtension.ExportPolicy%2A> method.</span></span> <span data-ttu-id="b0d57-128">您可以使用 <xref:System.ServiceModel.Description.PolicyConversionContext> 執行個體的方法，加入至附加於訊息、作業或端點主體之 WSDL 繫結的原則判斷提示。</span><span class="sxs-lookup"><span data-stu-id="b0d57-128">You can use the methods on the <xref:System.ServiceModel.Description.PolicyConversionContext> instance to add to the policy assertions attached to the WSDL binding at the message, operation or endpoint subjects.</span></span>  
  
 <span data-ttu-id="b0d57-129">如需詳細資訊，請參閱[How to： 匯出自訂原則判斷提示](../../../../docs/framework/wcf/extending/how-to-export-custom-policy-assertions.md)。</span><span class="sxs-lookup"><span data-stu-id="b0d57-129">For more information, see [How to: Export Custom Policy Assertions](../../../../docs/framework/wcf/extending/how-to-export-custom-policy-assertions.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="b0d57-130">另請參閱</span><span class="sxs-lookup"><span data-stu-id="b0d57-130">See Also</span></span>  
 [<span data-ttu-id="b0d57-131">如何：匯出自訂 WSDL</span><span class="sxs-lookup"><span data-stu-id="b0d57-131">How to: Export Custom WSDL</span></span>](../../../../docs/framework/wcf/extending/how-to-export-custom-wsdl.md)  
 [<span data-ttu-id="b0d57-132">如何：匯出自訂原則判斷提示</span><span class="sxs-lookup"><span data-stu-id="b0d57-132">How to: Export Custom Policy Assertions</span></span>](../../../../docs/framework/wcf/extending/how-to-export-custom-policy-assertions.md)  
 [<span data-ttu-id="b0d57-133">匯入 WCF 延伸模組的自訂中繼資料</span><span class="sxs-lookup"><span data-stu-id="b0d57-133">Importing Custom Metadata for a WCF Extension</span></span>](../../../../docs/framework/wcf/extending/importing-custom-metadata-for-a-wcf-extension.md)
