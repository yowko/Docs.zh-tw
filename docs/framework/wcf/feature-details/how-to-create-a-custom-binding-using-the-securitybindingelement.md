---
title: HOW TO：使用 SecurityBindingElement 建立自訂繫結
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- security [WCF], creating custom bindings
ms.assetid: 203a9f9e-3a73-427c-87aa-721c56265b29
ms.openlocfilehash: df40d8dbd5af9acf9e9484ee7694df2bba7ad9f1
ms.sourcegitcommit: c93fd5139f9efcf6db514e3474301738a6d1d649
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 10/27/2018
ms.locfileid: "50181130"
---
# <a name="how-to-create-a-custom-binding-using-the-securitybindingelement"></a><span data-ttu-id="5ef54-102">HOW TO：使用 SecurityBindingElement 建立自訂繫結</span><span class="sxs-lookup"><span data-stu-id="5ef54-102">How to: Create a Custom Binding Using the SecurityBindingElement</span></span>
<span data-ttu-id="5ef54-103">Windows Communication Foundation (WCF) 包含數個系統提供繫結，您可以設定，但不是能提供充分的彈性設定 WCF 支援的所有安全性選項時。</span><span class="sxs-lookup"><span data-stu-id="5ef54-103">Windows Communication Foundation (WCF) includes several system-provided bindings that can be configured but do not provide full flexibility when configuring all the security options that WCF supports.</span></span> <span data-ttu-id="5ef54-104">本主題示範如何直接從個別的繫結元素建立自訂繫結，並強調一些可在建立這類繫結時指定的安全設定。</span><span class="sxs-lookup"><span data-stu-id="5ef54-104">This topic demonstrates how to create a custom binding directly from individual binding elements and highlights some of the security settings that can be specified when creating such a binding.</span></span> <span data-ttu-id="5ef54-105">如需建立自訂繫結的詳細資訊，請參閱[擴充繫結](../../../../docs/framework/wcf/extending/extending-bindings.md)。</span><span class="sxs-lookup"><span data-stu-id="5ef54-105">For more information about creating custom bindings, see [Extending Bindings](../../../../docs/framework/wcf/extending/extending-bindings.md).</span></span>  
  
> [!WARNING]
>  <span data-ttu-id="5ef54-106"><xref:System.ServiceModel.Channels.SecurityBindingElement> 不支援 <xref:System.ServiceModel.Channels.IDuplexSessionChannel> 通道圖案，當 <xref:System.ServiceModel.TransferMode> 設定為 <xref:System.ServiceModel.TransferMode.Buffered> 時，這是 TCP 傳輸使用的預設通道圖案。</span><span class="sxs-lookup"><span data-stu-id="5ef54-106"><xref:System.ServiceModel.Channels.SecurityBindingElement> does not support the <xref:System.ServiceModel.Channels.IDuplexSessionChannel> channel shape, which is the default channel shape use by the TCP transport when <xref:System.ServiceModel.TransferMode> is set to <xref:System.ServiceModel.TransferMode.Buffered>.</span></span> <span data-ttu-id="5ef54-107">您必須將 <xref:System.ServiceModel.TransferMode> 設定為 <xref:System.ServiceModel.TransferMode.Streamed>，才能在這個情況中使用 <xref:System.ServiceModel.Channels.SecurityBindingElement>。</span><span class="sxs-lookup"><span data-stu-id="5ef54-107">You must set <xref:System.ServiceModel.TransferMode> to <xref:System.ServiceModel.TransferMode.Streamed> in order to use <xref:System.ServiceModel.Channels.SecurityBindingElement> in this scenario.</span></span>  
  
## <a name="creating-a-custom-binding"></a><span data-ttu-id="5ef54-108">建立自訂繫結</span><span class="sxs-lookup"><span data-stu-id="5ef54-108">Creating a Custom Binding</span></span>  
 <span data-ttu-id="5ef54-109">在 WCF 中的所有繫結組成*繫結項目*。</span><span class="sxs-lookup"><span data-stu-id="5ef54-109">In WCF all bindings are made up of *binding elements*.</span></span> <span data-ttu-id="5ef54-110">每個繫結項目均衍生自 <xref:System.ServiceModel.Channels.BindingElement> 類別。</span><span class="sxs-lookup"><span data-stu-id="5ef54-110">Each binding element derives from the <xref:System.ServiceModel.Channels.BindingElement> class.</span></span> <span data-ttu-id="5ef54-111">如果是標準系統提供的繫結，雖然您可以自訂某些屬性設定，但是系統仍會為您先建立並且設定好繫結項目。</span><span class="sxs-lookup"><span data-stu-id="5ef54-111">For the standard system-provided bindings, the binding elements are created and configured for you, although you can customize some of the property settings.</span></span>  
  
 <span data-ttu-id="5ef54-112">相反的，若要建立自訂繫結，會建立並且設定繫結項目，並且從自訂項目建立一個<xref:System.ServiceModel.Channels.CustomBinding>。</span><span class="sxs-lookup"><span data-stu-id="5ef54-112">In contrast, to create a custom binding, binding elements are created and configured and a <xref:System.ServiceModel.Channels.CustomBinding> is created from the binding elements.</span></span>  
  
 <span data-ttu-id="5ef54-113">若要進行這個步驟，您可以將個別的繫結項目加入到由 <xref:System.ServiceModel.Channels.BindingElementCollection>`Elements`類別之執行個體所表示的集合，然後，將 `CustomBinding`的 屬性設定為等同於該物件的項目。</span><span class="sxs-lookup"><span data-stu-id="5ef54-113">To do this, you add the individual binding elements to a collection represented by an instance of the <xref:System.ServiceModel.Channels.BindingElementCollection> class, and then set the `Elements` property of the `CustomBinding` equal to that object.</span></span> <span data-ttu-id="5ef54-114">必須按照下列順序加入繫結項目：Transaction Flow、Reliable Session、Security、Composite Duplex、One-way、Stream Security、Message Encoding 然後是 Transport。</span><span class="sxs-lookup"><span data-stu-id="5ef54-114">You must add the binding elements in the following order: Transaction Flow, Reliable Session, Security, Composite Duplex, One-way, Stream Security, Message Encoding, and Transport.</span></span> <span data-ttu-id="5ef54-115">請注意，並非每個繫結都需要所列的所有繫結項目。</span><span class="sxs-lookup"><span data-stu-id="5ef54-115">Note that not all the binding elements listed are required in every binding.</span></span>  
  
## <a name="securitybindingelement"></a><span data-ttu-id="5ef54-116">SecurityBindingElement</span><span class="sxs-lookup"><span data-stu-id="5ef54-116">SecurityBindingElement</span></span>  
 <span data-ttu-id="5ef54-117">有三個繫結項目與訊息層級安全性相關，這些項目全都衍生自 <xref:System.ServiceModel.Channels.SecurityBindingElement> 類別。</span><span class="sxs-lookup"><span data-stu-id="5ef54-117">Three binding elements relate to message level security, all of which derive from the <xref:System.ServiceModel.Channels.SecurityBindingElement> class.</span></span> <span data-ttu-id="5ef54-118">這三個項目分別是 <xref:System.ServiceModel.Channels.TransportSecurityBindingElement>、<xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement> 和 <xref:System.ServiceModel.Channels.AsymmetricSecurityBindingElement>。</span><span class="sxs-lookup"><span data-stu-id="5ef54-118">The three are <xref:System.ServiceModel.Channels.TransportSecurityBindingElement>, <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement>, and <xref:System.ServiceModel.Channels.AsymmetricSecurityBindingElement>.</span></span> <span data-ttu-id="5ef54-119"><xref:System.ServiceModel.Channels.TransportSecurityBindingElement> 用於提供混合模式安全性。</span><span class="sxs-lookup"><span data-stu-id="5ef54-119">The <xref:System.ServiceModel.Channels.TransportSecurityBindingElement> is used to provide Mixed mode security.</span></span> <span data-ttu-id="5ef54-120">當訊息層提供安全性時，則使用另外兩個項目。</span><span class="sxs-lookup"><span data-stu-id="5ef54-120">The other two elements are used when the message layer provides security.</span></span>  
  
 <span data-ttu-id="5ef54-121">當傳輸層提供安全性時，會使用其他的類別：</span><span class="sxs-lookup"><span data-stu-id="5ef54-121">Additional classes are used when transport level security is provided:</span></span>  
  
-   <xref:System.ServiceModel.Channels.HttpsTransportBindingElement>  
  
-   <xref:System.ServiceModel.Channels.SslStreamSecurityBindingElement>  
  
-   <xref:System.ServiceModel.Channels.WindowsStreamSecurityBindingElement>  
  
## <a name="required-binding-elements"></a><span data-ttu-id="5ef54-122">必要的繫結項目</span><span class="sxs-lookup"><span data-stu-id="5ef54-122">Required Binding Elements</span></span>  
 <span data-ttu-id="5ef54-123">有很多可能的繫結項目可以與任一繫結進行結合。</span><span class="sxs-lookup"><span data-stu-id="5ef54-123">There are a large number of possible binding elements that can be combined into a binding.</span></span> <span data-ttu-id="5ef54-124">但是並非所有的組合都有效。</span><span class="sxs-lookup"><span data-stu-id="5ef54-124">Not all of these combinations are valid.</span></span> <span data-ttu-id="5ef54-125">本節會說明安全性繫結中必須要有的項目。</span><span class="sxs-lookup"><span data-stu-id="5ef54-125">This section describes the required elements that must be present in a security binding.</span></span>  
  
 <span data-ttu-id="5ef54-126">有效的安全性繫結會因為許多因素而異，包括：</span><span class="sxs-lookup"><span data-stu-id="5ef54-126">Valid security bindings depend on many factors, including the following:</span></span>  
  
-   <span data-ttu-id="5ef54-127">安全性模式。</span><span class="sxs-lookup"><span data-stu-id="5ef54-127">Security mode.</span></span>  
  
-   <span data-ttu-id="5ef54-128">傳輸通訊協定。</span><span class="sxs-lookup"><span data-stu-id="5ef54-128">Transport protocol.</span></span>  
  
-   <span data-ttu-id="5ef54-129">合約中指定的訊息交換模式 (MEP)。</span><span class="sxs-lookup"><span data-stu-id="5ef54-129">The message exchange pattern (MEP) specified in the contract.</span></span>  
  
 <span data-ttu-id="5ef54-130">下表針對前述的因素，列出每一個組合的有效繫結項目堆疊組態。</span><span class="sxs-lookup"><span data-stu-id="5ef54-130">The following table shows the valid binding element stack configurations for each combination of the preceding factors.</span></span> <span data-ttu-id="5ef54-131">請注意，這些都是基本需求。</span><span class="sxs-lookup"><span data-stu-id="5ef54-131">Note that these are minimal requirements.</span></span> <span data-ttu-id="5ef54-132">您可以將其他繫結程序項目加入繫結程序中，如訊息編碼繫結程序項目、異動繫結程序項目以及其他繫結程序項目。</span><span class="sxs-lookup"><span data-stu-id="5ef54-132">You can add additional binding elements to the binding, such as message encoding binding elements, transaction binding elements, and other binding elements.</span></span>  
  
|<span data-ttu-id="5ef54-133">安全性模式</span><span class="sxs-lookup"><span data-stu-id="5ef54-133">Security Mode</span></span>|<span data-ttu-id="5ef54-134">Transport</span><span class="sxs-lookup"><span data-stu-id="5ef54-134">Transport</span></span>|<span data-ttu-id="5ef54-135">合約訊息交換模式</span><span class="sxs-lookup"><span data-stu-id="5ef54-135">Contract Message Exchange Pattern</span></span>|<span data-ttu-id="5ef54-136">合約訊息交換模式</span><span class="sxs-lookup"><span data-stu-id="5ef54-136">Contract Message Exchange Pattern</span></span>|<span data-ttu-id="5ef54-137">合約訊息交換模式</span><span class="sxs-lookup"><span data-stu-id="5ef54-137">Contract Message Exchange Pattern</span></span>|  
|-------------------|---------------|---------------------------------------|---------------------------------------|---------------------------------------|  
|||`Datagram`|`Request Reply`|`Duplex`|  
|<span data-ttu-id="5ef54-138">Transport</span><span class="sxs-lookup"><span data-stu-id="5ef54-138">Transport</span></span>|<span data-ttu-id="5ef54-139">Https</span><span class="sxs-lookup"><span data-stu-id="5ef54-139">Https</span></span>||||  
|||<span data-ttu-id="5ef54-140">OneWayBindingElement</span><span class="sxs-lookup"><span data-stu-id="5ef54-140">OneWayBindingElement</span></span>|||  
|||<span data-ttu-id="5ef54-141">HttpsTransportBindingElement</span><span class="sxs-lookup"><span data-stu-id="5ef54-141">HttpsTransportBindingElement</span></span>|<span data-ttu-id="5ef54-142">HttpsTransportBindingElement</span><span class="sxs-lookup"><span data-stu-id="5ef54-142">HttpsTransportBindingElement</span></span>||  
||<span data-ttu-id="5ef54-143">TCP</span><span class="sxs-lookup"><span data-stu-id="5ef54-143">TCP</span></span>||||  
|||<span data-ttu-id="5ef54-144">OneWayBindingElement</span><span class="sxs-lookup"><span data-stu-id="5ef54-144">OneWayBindingElement</span></span>|||  
|||<span data-ttu-id="5ef54-145">SSL 或 Windows StreamSecurityBindingElement</span><span class="sxs-lookup"><span data-stu-id="5ef54-145">SSL or Windows StreamSecurityBindingElement</span></span>|<span data-ttu-id="5ef54-146">SSL 或 Windows StreamSecurityBindingElement</span><span class="sxs-lookup"><span data-stu-id="5ef54-146">SSL or Windows StreamSecurityBindingElement</span></span>|<span data-ttu-id="5ef54-147">SSL 或 Windows StreamSecurityBindingElement</span><span class="sxs-lookup"><span data-stu-id="5ef54-147">SSL or Windows StreamSecurityBindingElement</span></span>|  
|||<span data-ttu-id="5ef54-148">TcpTransportBindingElement</span><span class="sxs-lookup"><span data-stu-id="5ef54-148">TcpTransportBindingElement</span></span>|<span data-ttu-id="5ef54-149">TcpTransportBindingElement</span><span class="sxs-lookup"><span data-stu-id="5ef54-149">TcpTransportBindingElement</span></span>|<span data-ttu-id="5ef54-150">TcpTransportBindingElement</span><span class="sxs-lookup"><span data-stu-id="5ef54-150">TcpTransportBindingElement</span></span>|  
|<span data-ttu-id="5ef54-151">訊息</span><span class="sxs-lookup"><span data-stu-id="5ef54-151">Message</span></span>|<span data-ttu-id="5ef54-152">Http</span><span class="sxs-lookup"><span data-stu-id="5ef54-152">Http</span></span>|<span data-ttu-id="5ef54-153">SymmetricSecurityBindingElement</span><span class="sxs-lookup"><span data-stu-id="5ef54-153">SymmetricSecurityBindingElement</span></span>|<span data-ttu-id="5ef54-154">SymmetricSecurityBindingElement</span><span class="sxs-lookup"><span data-stu-id="5ef54-154">SymmetricSecurityBindingElement</span></span>|<span data-ttu-id="5ef54-155">SymmetricSecurityBindingElement (驗證模式 = SecureConversation)</span><span class="sxs-lookup"><span data-stu-id="5ef54-155">SymmetricSecurityBindingElement (authentication mode = SecureConversation)</span></span>|  
|||||<span data-ttu-id="5ef54-156">CompositeDuplexBindingElement</span><span class="sxs-lookup"><span data-stu-id="5ef54-156">CompositeDuplexBindingElement</span></span>|  
|||<span data-ttu-id="5ef54-157">OneWayBindingElement</span><span class="sxs-lookup"><span data-stu-id="5ef54-157">OneWayBindingElement</span></span>||<span data-ttu-id="5ef54-158">OneWayBindingElement</span><span class="sxs-lookup"><span data-stu-id="5ef54-158">OneWayBindingElement</span></span>|  
|||<span data-ttu-id="5ef54-159">HttpTransportBindingElement</span><span class="sxs-lookup"><span data-stu-id="5ef54-159">HttpTransportBindingElement</span></span>|<span data-ttu-id="5ef54-160">HttpTransportBindingElement</span><span class="sxs-lookup"><span data-stu-id="5ef54-160">HttpTransportBindingElement</span></span>|<span data-ttu-id="5ef54-161">HttpTransportBindingElement</span><span class="sxs-lookup"><span data-stu-id="5ef54-161">HttpTransportBindingElement</span></span>|  
||<span data-ttu-id="5ef54-162">Tcp</span><span class="sxs-lookup"><span data-stu-id="5ef54-162">Tcp</span></span>|<span data-ttu-id="5ef54-163">SecurityBindingElement</span><span class="sxs-lookup"><span data-stu-id="5ef54-163">SecurityBindingElement</span></span>|<span data-ttu-id="5ef54-164">SecurityBindingElement</span><span class="sxs-lookup"><span data-stu-id="5ef54-164">SecurityBindingElement</span></span>|<span data-ttu-id="5ef54-165">SymmetricSecurityBindingElement (驗證模式 = SecureConversation)</span><span class="sxs-lookup"><span data-stu-id="5ef54-165">SymmetricSecurityBindingElement (authentication mode = SecureConversation)</span></span>|  
|||<span data-ttu-id="5ef54-166">TcpTransportBindingElement</span><span class="sxs-lookup"><span data-stu-id="5ef54-166">TcpTransportBindingElement</span></span>|<span data-ttu-id="5ef54-167">TcpTransportBindingElement</span><span class="sxs-lookup"><span data-stu-id="5ef54-167">TcpTransportBindingElement</span></span>|<span data-ttu-id="5ef54-168">TcpTransportBindingElement</span><span class="sxs-lookup"><span data-stu-id="5ef54-168">TcpTransportBindingElement</span></span>|  
|<span data-ttu-id="5ef54-169">混合式 (使用訊息認證的傳輸)</span><span class="sxs-lookup"><span data-stu-id="5ef54-169">Mixed (transport with message credentials)</span></span>|<span data-ttu-id="5ef54-170">Https</span><span class="sxs-lookup"><span data-stu-id="5ef54-170">Https</span></span>|<span data-ttu-id="5ef54-171">TransportSecurityBindingElement</span><span class="sxs-lookup"><span data-stu-id="5ef54-171">TransportSecurityBindingElement</span></span>|<span data-ttu-id="5ef54-172">TransportSecurityBindingElement</span><span class="sxs-lookup"><span data-stu-id="5ef54-172">TransportSecurityBindingElement</span></span>||  
|||<span data-ttu-id="5ef54-173">OneWayBindingElement</span><span class="sxs-lookup"><span data-stu-id="5ef54-173">OneWayBindingElement</span></span>|||  
|||<span data-ttu-id="5ef54-174">HttpsTransportBindingElement</span><span class="sxs-lookup"><span data-stu-id="5ef54-174">HttpsTransportBindingElement</span></span>|<span data-ttu-id="5ef54-175">HttpsTransportBindingElement</span><span class="sxs-lookup"><span data-stu-id="5ef54-175">HttpsTransportBindingElement</span></span>||  
||<span data-ttu-id="5ef54-176">TCP</span><span class="sxs-lookup"><span data-stu-id="5ef54-176">TCP</span></span>|<span data-ttu-id="5ef54-177">TransportSecurityBindingElement</span><span class="sxs-lookup"><span data-stu-id="5ef54-177">TransportSecurityBindingElement</span></span>|<span data-ttu-id="5ef54-178">SymmetricSecurityBindingElement (驗證模式 = SecureConversation)</span><span class="sxs-lookup"><span data-stu-id="5ef54-178">SymmetricSecurityBindingElement (authentication mode = SecureConversation)</span></span>|<span data-ttu-id="5ef54-179">SymmetricSecurityBindingElement (驗證模式 = SecureConversation)</span><span class="sxs-lookup"><span data-stu-id="5ef54-179">SymmetricSecurityBindingElement (authentication mode = SecureConversation)</span></span>|  
|||<span data-ttu-id="5ef54-180">OneWayBindingElement</span><span class="sxs-lookup"><span data-stu-id="5ef54-180">OneWayBindingElement</span></span>|||  
|||<span data-ttu-id="5ef54-181">SSL 或 Windows StreamSecurityBindingElement</span><span class="sxs-lookup"><span data-stu-id="5ef54-181">SSL or Windows StreamSecurityBindingElement</span></span>|<span data-ttu-id="5ef54-182">SSL 或 Windows StreamSecurityBindingElement</span><span class="sxs-lookup"><span data-stu-id="5ef54-182">SSL or Windows StreamSecurityBindingElement</span></span>|<span data-ttu-id="5ef54-183">SSL 或 Windows StreamSecurityBindingElement</span><span class="sxs-lookup"><span data-stu-id="5ef54-183">SSL or Windows StreamSecurityBindingElement</span></span>|  
|||<span data-ttu-id="5ef54-184">TcpTransportBindingElement</span><span class="sxs-lookup"><span data-stu-id="5ef54-184">TcpTransportBindingElement</span></span>|<span data-ttu-id="5ef54-185">TcpTransportBindingElement</span><span class="sxs-lookup"><span data-stu-id="5ef54-185">TcpTransportBindingElement</span></span>|<span data-ttu-id="5ef54-186">TcpTransportBindingElement</span><span class="sxs-lookup"><span data-stu-id="5ef54-186">TcpTransportBindingElement</span></span>|  
  
 <span data-ttu-id="5ef54-187">請注意，SecurityBindingElements 有許多可以設定的項目。</span><span class="sxs-lookup"><span data-stu-id="5ef54-187">Note that there are many configurable settings on the SecurityBindingElements.</span></span> <span data-ttu-id="5ef54-188">如需詳細資訊，請參閱 < [SecurityBindingElement 驗證模式](../../../../docs/framework/wcf/feature-details/securitybindingelement-authentication-modes.md)。</span><span class="sxs-lookup"><span data-stu-id="5ef54-188">For more information, see [SecurityBindingElement Authentication Modes](../../../../docs/framework/wcf/feature-details/securitybindingelement-authentication-modes.md).</span></span>  
  
 <span data-ttu-id="5ef54-189">如需詳細資訊，請參閱 <<c0> [ 安全對話與安全工作階段](../../../../docs/framework/wcf/feature-details/secure-conversations-and-secure-sessions.md)。</span><span class="sxs-lookup"><span data-stu-id="5ef54-189">For more information, see [Secure Conversations and Secure Sessions](../../../../docs/framework/wcf/feature-details/secure-conversations-and-secure-sessions.md).</span></span>  
  
## <a name="procedures"></a><span data-ttu-id="5ef54-190">程序</span><span class="sxs-lookup"><span data-stu-id="5ef54-190">Procedures</span></span>  
  
#### <a name="to-create-a-custom-binding-that-uses-a-symmetricsecuritybindingelement"></a><span data-ttu-id="5ef54-191">若要建立使用 SymmetricSecurityBindingElement 的自訂繫結</span><span class="sxs-lookup"><span data-stu-id="5ef54-191">To create a custom binding that uses a SymmetricSecurityBindingElement</span></span>  
  
1.  <span data-ttu-id="5ef54-192">建立名稱為 <xref:System.ServiceModel.Channels.BindingElementCollection> 之 `outputBec` 類別的執行個體。</span><span class="sxs-lookup"><span data-stu-id="5ef54-192">Create an instance of the <xref:System.ServiceModel.Channels.BindingElementCollection> class with the name `outputBec`.</span></span>  
  
2.  <span data-ttu-id="5ef54-193">呼叫靜態方法 `M:System.ServiceModel.Channels.SecurityBindingElement.CreateSspiNegotiationBindingElement(true)`，此方法會傳回 <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement>類別。</span><span class="sxs-lookup"><span data-stu-id="5ef54-193">Call the static method `M:System.ServiceModel.Channels.SecurityBindingElement.CreateSspiNegotiationBindingElement(true)`, which returns an instance of the <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement> class.</span></span>  
  
3.  <span data-ttu-id="5ef54-194">將 <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement> 新增至集合 (`outputBec`)，方法是呼叫 `Add` 類別其 <xref:System.Collections.ObjectModel.Collection%601> 的 <xref:System.ServiceModel.Channels.BindingElement> 方法。</span><span class="sxs-lookup"><span data-stu-id="5ef54-194">Add the <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement> to the collection (`outputBec`) by calling the `Add` method of the <xref:System.Collections.ObjectModel.Collection%601> of <xref:System.ServiceModel.Channels.BindingElement> class.</span></span>  
  
4.  <span data-ttu-id="5ef54-195">建立 <xref:System.ServiceModel.Channels.TextMessageEncodingBindingElement> 類別的執行個體，並將它新增至集合 (`outputBec`)。</span><span class="sxs-lookup"><span data-stu-id="5ef54-195">Create an instance of the <xref:System.ServiceModel.Channels.TextMessageEncodingBindingElement> class and add it to the collection (`outputBec`).</span></span> <span data-ttu-id="5ef54-196">這會指定繫結使用的編碼方式。</span><span class="sxs-lookup"><span data-stu-id="5ef54-196">This specifies the encoding used by the binding.</span></span>  
  
5.  <span data-ttu-id="5ef54-197">建立 <xref:System.ServiceModel.Channels.HttpTransportBindingElement>，並將它新增至集合 (`outputBec`)。</span><span class="sxs-lookup"><span data-stu-id="5ef54-197">Create a <xref:System.ServiceModel.Channels.HttpTransportBindingElement> and add it to the collection (`outputBec`).</span></span> <span data-ttu-id="5ef54-198">這會指定繫結要使用 HTTP 傳輸。</span><span class="sxs-lookup"><span data-stu-id="5ef54-198">This specifies that the binding uses the HTTP transport.</span></span>  
  
6.  <span data-ttu-id="5ef54-199">建立新自訂繫結，方式是建立 <xref:System.ServiceModel.Channels.CustomBinding> 類別的執行個體，並將 `outputBec` 集合傳遞至建構函式。</span><span class="sxs-lookup"><span data-stu-id="5ef54-199">Create a new custom binding by creating an instance of the <xref:System.ServiceModel.Channels.CustomBinding> class and passing the collection `outputBec` to the constructor.</span></span>  
  
7.  <span data-ttu-id="5ef54-200">產生的自訂繫結會有許多與標準 <xref:System.ServiceModel.WSHttpBinding> 相同的特性。</span><span class="sxs-lookup"><span data-stu-id="5ef54-200">The resulting custom binding shares many of the same characteristics as the standard <xref:System.ServiceModel.WSHttpBinding>.</span></span> <span data-ttu-id="5ef54-201">它會指定訊息層級安全性和 Windows 認證，但停用安全工作階段，並要求指定超出範圍的認證，且不會加密簽章。</span><span class="sxs-lookup"><span data-stu-id="5ef54-201">It specifies message-level security and Windows credentials but disables secure sessions, requires that the service credential be specified out-of-band, and does not encrypt signatures.</span></span> <span data-ttu-id="5ef54-202">最後一項只能透過依照步驟 4 的方式設定 <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement.MessageProtectionOrder%2A> 屬性來控制，其他兩項可透過使用標準繫結上的設定來控制。</span><span class="sxs-lookup"><span data-stu-id="5ef54-202">The last can be controlled only by setting the <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement.MessageProtectionOrder%2A> property as shown in step 4.</span></span> <span data-ttu-id="5ef54-203">其他兩項可透過使用標準繫結程序上的設定來控制。</span><span class="sxs-lookup"><span data-stu-id="5ef54-203">The other two can be controlled using settings on the standard binding.</span></span>  
  
## <a name="example"></a><span data-ttu-id="5ef54-204">範例</span><span class="sxs-lookup"><span data-stu-id="5ef54-204">Example</span></span>  
  
### <a name="description"></a><span data-ttu-id="5ef54-205">描述</span><span class="sxs-lookup"><span data-stu-id="5ef54-205">Description</span></span>  
 <span data-ttu-id="5ef54-206">下列範例提供完整的函式，可建立使用 <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement> 的自訂繫結。</span><span class="sxs-lookup"><span data-stu-id="5ef54-206">The following example provides a complete function to create a custom binding that uses a <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement>.</span></span>  
  
### <a name="code"></a><span data-ttu-id="5ef54-207">程式碼</span><span class="sxs-lookup"><span data-stu-id="5ef54-207">Code</span></span>  
 [!code-csharp[c_CustomBinding#20](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_custombinding/cs/c_custombinding.cs#20)]
 [!code-vb[c_CustomBinding#20](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_custombinding/vb/source.vb#20)]  
  
## <a name="see-also"></a><span data-ttu-id="5ef54-208">另請參閱</span><span class="sxs-lookup"><span data-stu-id="5ef54-208">See Also</span></span>  
 <xref:System.ServiceModel.Channels.SecurityBindingElement>  
 <xref:System.ServiceModel.Channels.TransportSecurityBindingElement>  
 <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement>  
 <xref:System.ServiceModel.Channels.CustomBinding>  
 [<span data-ttu-id="5ef54-209">擴充繫結</span><span class="sxs-lookup"><span data-stu-id="5ef54-209">Extending Bindings</span></span>](../../../../docs/framework/wcf/extending/extending-bindings.md)  
 [<span data-ttu-id="5ef54-210">系統提供的繫結</span><span class="sxs-lookup"><span data-stu-id="5ef54-210">System-Provided Bindings</span></span>](../../../../docs/framework/wcf/system-provided-bindings.md)
