---
title: 阻斷服務
ms.date: 03/30/2017
helpviewer_keywords:
- denial of service [WCF]
ms.assetid: dfb150f3-d598-4697-a5e6-6779e4f9b600
ms.openlocfilehash: 426429eefd038008340a956ab3fa3cba21906c84
ms.sourcegitcommit: 2701302a99cafbe0d86d53d540eb0fa7e9b46b36
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 04/28/2019
ms.locfileid: "64627018"
---
# <a name="denial-of-service"></a><span data-ttu-id="80a2b-102">阻斷服務</span><span class="sxs-lookup"><span data-stu-id="80a2b-102">Denial of Service</span></span>
<span data-ttu-id="80a2b-103">當系統由於無法處理訊息，或者處理訊息的速度極為緩慢而爆滿時，就會發生阻絕服務。</span><span class="sxs-lookup"><span data-stu-id="80a2b-103">Denial of service occurs when a system is overwhelmed in such a way that messages cannot be processed, or they are processed extremely slowly.</span></span>  
  
## <a name="excess-memory-consumption"></a><span data-ttu-id="80a2b-104">過多記憶體耗用</span><span class="sxs-lookup"><span data-stu-id="80a2b-104">Excess Memory Consumption</span></span>  
 <span data-ttu-id="80a2b-105">讀取具有大量唯一本機名稱、命名空間或前置詞的 XML 文件時，會發生問題。</span><span class="sxs-lookup"><span data-stu-id="80a2b-105">A problem can occur when reading an XML document with a large number of unique local names, namespaces, or prefixes.</span></span> <span data-ttu-id="80a2b-106">如果您正在使用衍生自 <xref:System.Xml.XmlReader> 的類別，且您為每個項目呼叫 <xref:System.Xml.XmlReader.LocalName%2A>、<xref:System.Xml.XmlReader.Prefix%2A> 或 <xref:System.Xml.XmlReader.NamespaceURI%2A> 屬性，則傳回的字串會新增至 <xref:System.Xml.NameTable>。</span><span class="sxs-lookup"><span data-stu-id="80a2b-106">If you are using a class that derives from <xref:System.Xml.XmlReader>, and you call either the <xref:System.Xml.XmlReader.LocalName%2A>, <xref:System.Xml.XmlReader.Prefix%2A> or <xref:System.Xml.XmlReader.NamespaceURI%2A> property for each item, the returned string is added to a <xref:System.Xml.NameTable>.</span></span> <span data-ttu-id="80a2b-107"><xref:System.Xml.NameTable> 所持有的集合大小一定不會減小，它會建立字串控制代碼的虛擬「記憶體遺漏」(Memory Leak)。</span><span class="sxs-lookup"><span data-stu-id="80a2b-107">The collection held by the <xref:System.Xml.NameTable> never decreases in size, creating a virtual "memory leak" of the string handles.</span></span>  
  
 <span data-ttu-id="80a2b-108">風險降低的方式包括：</span><span class="sxs-lookup"><span data-stu-id="80a2b-108">Mitigations include:</span></span>  
  
- <span data-ttu-id="80a2b-109">衍生自 <xref:System.Xml.NameTable> 類別並強制執行最大的大小配額 </span><span class="sxs-lookup"><span data-stu-id="80a2b-109">Derive from the <xref:System.Xml.NameTable> class and enforce a maximum size quota.</span></span> <span data-ttu-id="80a2b-110">(當配額已滿時，您無法避免使用 <xref:System.Xml.NameTable> 或切換 <xref:System.Xml.NameTable>)。</span><span class="sxs-lookup"><span data-stu-id="80a2b-110">(You cannot prevent the use of a <xref:System.Xml.NameTable> or switch the <xref:System.Xml.NameTable> when it is full.)</span></span>  
  
- <span data-ttu-id="80a2b-111">避免使用提到的屬性，並盡量搭配使用 <xref:System.Xml.XmlReader.MoveToAttribute%2A> 方法和 <xref:System.Xml.XmlReader.IsStartElement%2A> 方法，這些方法不會傳回字串，這樣就可避免 <xref:System.Xml.NameTable> 集合太滿的問題。</span><span class="sxs-lookup"><span data-stu-id="80a2b-111">Avoid using the properties mentioned and instead use the <xref:System.Xml.XmlReader.MoveToAttribute%2A> method with the <xref:System.Xml.XmlReader.IsStartElement%2A> method where possible; those methods do not return strings and thus avoid the problem of overfilling the <xref:System.Xml.NameTable> collection.</span></span>  
  
## <a name="malicious-client-sends-excessive-license-requests-to-service"></a><span data-ttu-id="80a2b-112">惡意用戶端將大量授權要求傳送至服務</span><span class="sxs-lookup"><span data-stu-id="80a2b-112">Malicious Client Sends Excessive License Requests to Service</span></span>  
 <span data-ttu-id="80a2b-113">如果惡意用戶端透過大量授權要求炸滿服務，就可能導致伺服器使用過多的記憶體。</span><span class="sxs-lookup"><span data-stu-id="80a2b-113">If a malicious client bombards a service with excessive license requests, it can cause the server to use excessive memory.</span></span>  
  
 <span data-ttu-id="80a2b-114">風險降低：使用下列屬性的<xref:System.ServiceModel.Channels.LocalServiceSecuritySettings>類別：</span><span class="sxs-lookup"><span data-stu-id="80a2b-114">Mitigation: Use the following properties of the <xref:System.ServiceModel.Channels.LocalServiceSecuritySettings> class:</span></span>  
  
- <span data-ttu-id="80a2b-115"><xref:System.ServiceModel.Channels.LocalServiceSecuritySettings.MaxCachedCookies%2A>：控制時間界限之 `SecurityContextToken` 的上限，而這是伺服器在 `SPNego` 或 `SSL` 交涉之後快取的上限。</span><span class="sxs-lookup"><span data-stu-id="80a2b-115"><xref:System.ServiceModel.Channels.LocalServiceSecuritySettings.MaxCachedCookies%2A>: controls the maximum number of time-bounded `SecurityContextToken`s that the server caches after `SPNego` or `SSL` negotiation.</span></span>  
  
- <span data-ttu-id="80a2b-116"><xref:System.ServiceModel.Channels.LocalServiceSecuritySettings.IssuedCookieLifetime%2A>：控制 `SecurityContextTokens` 的存留時間，而這是伺服器在 `SPNego` 或 `SSL` 交涉之後發出的存留時間。</span><span class="sxs-lookup"><span data-stu-id="80a2b-116"><xref:System.ServiceModel.Channels.LocalServiceSecuritySettings.IssuedCookieLifetime%2A>: controls the lifetime of the `SecurityContextTokens` that the server issues following `SPNego` or `SSL` negotiation.</span></span> <span data-ttu-id="80a2b-117">伺服器在這段時間內會快取 `SecurityContextToken`。</span><span class="sxs-lookup"><span data-stu-id="80a2b-117">The server caches the `SecurityContextToken`s for this period of time.</span></span>  
  
- <span data-ttu-id="80a2b-118"><xref:System.ServiceModel.Channels.LocalServiceSecuritySettings.MaxPendingSessions%2A>：控制在伺服器中建立的安全對話上限，但是不會針對這些對話處理應用程式訊息。</span><span class="sxs-lookup"><span data-stu-id="80a2b-118"><xref:System.ServiceModel.Channels.LocalServiceSecuritySettings.MaxPendingSessions%2A>: controls the maximum number of secure conversations that are established at the server but for which no application messages have been processed.</span></span> <span data-ttu-id="80a2b-119">這個配額會防止用戶端在服務中建立安全對話，由此服務會針對每個用戶端保留對話狀態，但不會使用這些對話。</span><span class="sxs-lookup"><span data-stu-id="80a2b-119">This quota prevents clients from establishing secure conversations at the service, thereby causing the service to maintain state per client, but never using them.</span></span>  
  
- <span data-ttu-id="80a2b-120"><xref:System.ServiceModel.Channels.LocalServiceSecuritySettings.InactivityTimeout%2A>：控制服務將安全對話保留在作用中，而不會從用戶端中接收該對話之應用程式訊息的時間上限。</span><span class="sxs-lookup"><span data-stu-id="80a2b-120"><xref:System.ServiceModel.Channels.LocalServiceSecuritySettings.InactivityTimeout%2A>:  controls the maximum time the service keeps a secure conversation alive without receiving an application message from the client for the conversation.</span></span> <span data-ttu-id="80a2b-121">這個配額會防止用戶端在服務中建立安全對話，由此服務會針對每個用戶端保留對話狀態，但不會使用這些對話。</span><span class="sxs-lookup"><span data-stu-id="80a2b-121">This quota prevents clients from establishing secure conversations at the service, thereby causing the service to maintain state per client, but never using them.</span></span>  
  
## <a name="wsdualhttpbinding-or-dual-custom-bindings-require-client-authentication"></a><span data-ttu-id="80a2b-122">WSDualHttpBinding 或雙重自訂繫結需要用戶端驗證</span><span class="sxs-lookup"><span data-stu-id="80a2b-122">WSDualHttpBinding or Dual Custom Bindings Require Client Authentication</span></span>  
 <span data-ttu-id="80a2b-123">根據預設，<xref:System.ServiceModel.WSDualHttpBinding> 已啟用安全性。</span><span class="sxs-lookup"><span data-stu-id="80a2b-123">By default, the <xref:System.ServiceModel.WSDualHttpBinding> has security enabled.</span></span> <span data-ttu-id="80a2b-124">不過，如果透過將 <xref:System.ServiceModel.MessageSecurityOverHttp.ClientCredentialType%2A> 屬性設定為 <xref:System.ServiceModel.MessageCredentialType.None> 而停用用戶端驗證，則惡意使用者可能在第三個服務上導致阻絕服務攻擊。</span><span class="sxs-lookup"><span data-stu-id="80a2b-124">It is possible, however, that if the client authentication is disabled by setting the <xref:System.ServiceModel.MessageSecurityOverHttp.ClientCredentialType%2A> property to <xref:System.ServiceModel.MessageCredentialType.None>, a malicious user can cause a denial of service attack on a third service.</span></span> <span data-ttu-id="80a2b-125">可能是因為惡意用戶端可以導向至服務，並將訊息資料流傳送至第三個服務。</span><span class="sxs-lookup"><span data-stu-id="80a2b-125">This can occur because a malicious client can direct the service to send a stream of messages to a third service.</span></span>  
  
 <span data-ttu-id="80a2b-126">若要避免這個情況，請不要將屬性設定為 `None`。</span><span class="sxs-lookup"><span data-stu-id="80a2b-126">To mitigate this, do not set the property to `None`.</span></span> <span data-ttu-id="80a2b-127">建立具有雙重訊息模式的自訂繫結程序時，也請留意這個可能性。</span><span class="sxs-lookup"><span data-stu-id="80a2b-127">Also be aware of this possibility when creating a custom binding that has a dual message pattern.</span></span>  
  
## <a name="auditing-event-log-can-be-filled"></a><span data-ttu-id="80a2b-128">稽核事件記錄檔已滿</span><span class="sxs-lookup"><span data-stu-id="80a2b-128">Auditing Event Log Can Be Filled</span></span>  
 <span data-ttu-id="80a2b-129">如果惡意使用者發現已啟用稽核，攻擊者就可以傳送無效的訊息，而造成寫入稽核項目。</span><span class="sxs-lookup"><span data-stu-id="80a2b-129">If a malicious user understands that auditing is enabled, that attacker can send invalid messages that cause audit entries to be written.</span></span> <span data-ttu-id="80a2b-130">如果是因為這個方法而填滿稽核記錄檔，稽核系統就會失敗。</span><span class="sxs-lookup"><span data-stu-id="80a2b-130">If the audit log is filled in this manner, the auditing system fails.</span></span>  
  
 <span data-ttu-id="80a2b-131">若要減輕這個威脅，請將 <xref:System.ServiceModel.Description.ServiceSecurityAuditBehavior.SuppressAuditFailure%2A> 屬性設定為 `true`，並使用 [事件檢視器] 的屬性來控制稽核行為。</span><span class="sxs-lookup"><span data-stu-id="80a2b-131">To mitigate this, set the <xref:System.ServiceModel.Description.ServiceSecurityAuditBehavior.SuppressAuditFailure%2A> property to `true` and use the properties of the Event Viewer to control the auditing behavior.</span></span> <span data-ttu-id="80a2b-132">如需使用事件檢視器來檢視和管理事件記錄檔的詳細資訊，請參閱[事件檢視器](https://go.microsoft.com/fwlink/?LinkId=186123)。</span><span class="sxs-lookup"><span data-stu-id="80a2b-132">For more information about using the Event Viewer to view and manage event logs, see [Event Viewer](https://go.microsoft.com/fwlink/?LinkId=186123).</span></span> <span data-ttu-id="80a2b-133">如需詳細資訊，請參閱 <<c0> [ 稽核](../../../../docs/framework/wcf/feature-details/auditing-security-events.md)。</span><span class="sxs-lookup"><span data-stu-id="80a2b-133">For more information, see [Auditing](../../../../docs/framework/wcf/feature-details/auditing-security-events.md).</span></span>  
  
## <a name="invalid-implementations-of-iauthorizationpolicy-can-cause-service-hangs"></a><span data-ttu-id="80a2b-134">無效的 IAuthorizationPolicy 實作會導致服務停止回應</span><span class="sxs-lookup"><span data-stu-id="80a2b-134">Invalid Implementations of IAuthorizationPolicy Can Cause Service Hangs</span></span>  
 <span data-ttu-id="80a2b-135">在錯誤的 <xref:System.IdentityModel.Policy.IAuthorizationPolicy.Evaluate%2A> 介面實作上呼叫 <xref:System.IdentityModel.Policy.IAuthorizationPolicy> 方法，將會導致服務停止回應。</span><span class="sxs-lookup"><span data-stu-id="80a2b-135">Calling the <xref:System.IdentityModel.Policy.IAuthorizationPolicy.Evaluate%2A> method on a faulty implementation of the <xref:System.IdentityModel.Policy.IAuthorizationPolicy> interface can cause the service to hang.</span></span>  
  
 <span data-ttu-id="80a2b-136">風險降低：僅使用信任的程式碼。</span><span class="sxs-lookup"><span data-stu-id="80a2b-136">Mitigation: Use only trusted code.</span></span> <span data-ttu-id="80a2b-137">也就是說，僅使用您所撰寫並測試過的程式碼，或使用來自可信任提供者的程式碼。</span><span class="sxs-lookup"><span data-stu-id="80a2b-137">That is, use only code that you have written and tested, or that comes from a trusted provider.</span></span> <span data-ttu-id="80a2b-138">在沒有謹慎的考慮之前，請勿將不受信任的 <xref:System.IdentityModel.Policy.IAuthorizationPolicy> 延伸項目外掛至您的程式碼。</span><span class="sxs-lookup"><span data-stu-id="80a2b-138">Do not allow untrusted extensions of <xref:System.IdentityModel.Policy.IAuthorizationPolicy> to be plugged into your code without due consideration.</span></span> <span data-ttu-id="80a2b-139">這個做法適用於服務實作中使用的所有延伸項目。</span><span class="sxs-lookup"><span data-stu-id="80a2b-139">This applies to all extensions used in a service implementation.</span></span> <span data-ttu-id="80a2b-140">WCF 不會區分應用程式程式碼和已插入的外部程式碼中使用擴充點。</span><span class="sxs-lookup"><span data-stu-id="80a2b-140">WCF does not make any distinction between application code and foreign code that is plugged in using extensibility points.</span></span>  
  
## <a name="kerberos-maximum-token-size-may-need-resizing"></a><span data-ttu-id="80a2b-141">可能需要調整 Kerberos 權杖的大小上限</span><span class="sxs-lookup"><span data-stu-id="80a2b-141">Kerberos Maximum Token Size May Need Resizing</span></span>  
 <span data-ttu-id="80a2b-142">如果用戶端是許多群組的成員 (大約 900 個群組，不過實際數目會因群組而有所不同)，當訊息標頭的區塊超過 64 KB 時，可能會發生問題。</span><span class="sxs-lookup"><span data-stu-id="80a2b-142">If a client belongs to a large number of groups (approximately 900, although the actual number varies depending on the groups), a problem may occur when a message header's block exceeds 64 kilobytes.</span></span> <span data-ttu-id="80a2b-143">在此情況下，您可以增加 Kerberos 權杖的大小上限，Microsoft 支援文章中所述 」[Internet Explorer Kerberos 驗證無法運作由於連線至 IIS 的緩衝區不足](https://go.microsoft.com/fwlink/?LinkId=89176)。 」</span><span class="sxs-lookup"><span data-stu-id="80a2b-143">In that case, you can increase the maximum Kerberos token size, as described in the Microsoft Support article "[Internet Explorer Kerberos authentication does not work because of an insufficient buffer connecting to IIS](https://go.microsoft.com/fwlink/?LinkId=89176)."</span></span> <span data-ttu-id="80a2b-144">您也可能需要增加最大的 WCF 訊息大小，以容納較大型的 Kerberos 權杖。</span><span class="sxs-lookup"><span data-stu-id="80a2b-144">You may also need to increase the maximum WCF message size to accommodate the larger Kerberos token.</span></span>  
  
## <a name="autoenrollment-results-in-multiple-certificates-with-same-subject-name-for-machine"></a><span data-ttu-id="80a2b-145">自動註冊將使電腦中的多個憑證具有相同的主體名稱</span><span class="sxs-lookup"><span data-stu-id="80a2b-145">Autoenrollment Results in Multiple Certificates with Same Subject Name for Machine</span></span>  
 <span data-ttu-id="80a2b-146">*自動註冊*是功能[!INCLUDE[ws2003](../../../../includes/ws2003-md.md)]自動註冊使用者和電腦憑證。</span><span class="sxs-lookup"><span data-stu-id="80a2b-146">*Autoenrollment* is the capability of [!INCLUDE[ws2003](../../../../includes/ws2003-md.md)] to automatically enroll users and computers for certificates.</span></span> <span data-ttu-id="80a2b-147">當電腦在需要啟用功能的需求上開啟時，就會自動建立具有預期用戶端驗證用途的 X.509 憑證，而每當新電腦加入網路時，也會將此憑證插入本機電腦的「個人」憑證存放區。</span><span class="sxs-lookup"><span data-stu-id="80a2b-147">When a machine is on a domain with the feature enabled, an X.509 certificate with the intended purpose of client authentication is automatically created and inserted into the local computer's Personal certificates store whenever a new machine is joined to the network.</span></span> <span data-ttu-id="80a2b-148">不過，自動註冊會對在快取中建立的所有憑證，都使用同樣的主體名稱。</span><span class="sxs-lookup"><span data-stu-id="80a2b-148">However, autoenrollment uses the same subject name for all certificates it creates in the cache.</span></span>  
  
 <span data-ttu-id="80a2b-149">影響是 WCF 服務可能無法開啟 自動註冊的網域。</span><span class="sxs-lookup"><span data-stu-id="80a2b-149">The impact is that WCF services may fail to open on domains with autoenrollment.</span></span> <span data-ttu-id="80a2b-150">這是因為預設服務 X.509 認證搜尋準則可能不明確，起因則為存在多個具有電腦完整網域名稱系統 (DNS) 名稱的憑證。</span><span class="sxs-lookup"><span data-stu-id="80a2b-150">This occurs because the default service X.509 credential search criteria might be ambiguous because multiple certificates with the machine's fully qualified Domain Name System (DNS) name exist.</span></span> <span data-ttu-id="80a2b-151">某個憑證可能源自自動註冊，而其他憑證可能為自行發行的憑證。</span><span class="sxs-lookup"><span data-stu-id="80a2b-151">One certificate originates from autoenrollment; the other might be a self-issued certificate.</span></span>  
  
 <span data-ttu-id="80a2b-152">若要避免這個問題，請參考上使用更精確的搜尋準則使用的確切憑證[ \<serviceCredentials >](../../../../docs/framework/configure-apps/file-schema/wcf/servicecredentials.md)。</span><span class="sxs-lookup"><span data-stu-id="80a2b-152">To mitigate this, reference the exact certificate to use by using a more precise search criterion on the [\<serviceCredentials>](../../../../docs/framework/configure-apps/file-schema/wcf/servicecredentials.md).</span></span> <span data-ttu-id="80a2b-153">例如，請使用 <xref:System.Security.Cryptography.X509Certificates.X509FindType.FindByThumbprint> 選項，並依照其唯一指紋 (雜湊) 指定憑證。</span><span class="sxs-lookup"><span data-stu-id="80a2b-153">For example, use the <xref:System.Security.Cryptography.X509Certificates.X509FindType.FindByThumbprint> option, and specify the certificate by its unique thumbprint (hash).</span></span>  
  
 <span data-ttu-id="80a2b-154">如需自動註冊功能的詳細資訊，請參閱[Certificate Autoenrollment in Windows Server 2003](https://go.microsoft.com/fwlink/?LinkId=95166)。</span><span class="sxs-lookup"><span data-stu-id="80a2b-154">For more information about the autoenrollment feature, see [Certificate Autoenrollment in Windows Server 2003](https://go.microsoft.com/fwlink/?LinkId=95166).</span></span>  
  
## <a name="last-of-multiple-alternative-subject-names-used-for-authorization"></a><span data-ttu-id="80a2b-155">最後幾個用於授權的多個替代主體名稱</span><span class="sxs-lookup"><span data-stu-id="80a2b-155">Last of Multiple Alternative Subject Names Used for Authorization</span></span>  
 <span data-ttu-id="80a2b-156">在少數情況下，當 X.509 憑證包含多個替代主體名稱，而且您使用替代主體名稱進行授權時，授權可能會失敗。</span><span class="sxs-lookup"><span data-stu-id="80a2b-156">In the rare case when an X.509 certificate contains multiple alternative subject names, and you authorize using the alternative subject name, authorization may fail.</span></span>  
  
## <a name="protect-configuration-files-with-acls"></a><span data-ttu-id="80a2b-157">使用 ACL 保護組態檔</span><span class="sxs-lookup"><span data-stu-id="80a2b-157">Protect Configuration Files with ACLs</span></span>  
 <span data-ttu-id="80a2b-158">您可以針對 [!INCLUDE[infocard](../../../../includes/infocard-md.md)] 發行的權杖，在程式碼和組態檔中指定必要和選用的宣告。</span><span class="sxs-lookup"><span data-stu-id="80a2b-158">You can specify required and optional claims in code and configuration files for [!INCLUDE[infocard](../../../../includes/infocard-md.md)] issued tokens.</span></span> <span data-ttu-id="80a2b-159">這樣會造成在傳送至安全性權杖服務的 `RequestSecurityToken` 訊息中發出相對應的項目。</span><span class="sxs-lookup"><span data-stu-id="80a2b-159">This results in corresponding elements being emitted in `RequestSecurityToken` messages that are sent to the security token service.</span></span> <span data-ttu-id="80a2b-160">攻擊者可以修改程式碼或組態以移除必要或選用的宣告，這樣便有可能取得安全性權杖服務，而發出不允許存取目標服務的權杖。</span><span class="sxs-lookup"><span data-stu-id="80a2b-160">An attacker can modify code or configuration to remove required or optional claims, potentially getting the security token service to issue a token that does not allow access to the target service.</span></span>  
  
 <span data-ttu-id="80a2b-161">若要減輕此項目：需要修改組態檔的電腦存取權。</span><span class="sxs-lookup"><span data-stu-id="80a2b-161">To mitigate: Require access to the computer to modify the configuration file.</span></span> <span data-ttu-id="80a2b-162">使用檔案存取控制清單 (ACL) 以保護組態檔。</span><span class="sxs-lookup"><span data-stu-id="80a2b-162">Use file access control lists (ACLs) to secure configuration files.</span></span> <span data-ttu-id="80a2b-163">WCF 要求才會允許這類的程式碼，從組態載入程式碼存在於應用程式目錄或全域組件快取。</span><span class="sxs-lookup"><span data-stu-id="80a2b-163">WCF requires that code be in the application directory or the global assembly cache before it will allow such code to be loaded from configuration.</span></span> <span data-ttu-id="80a2b-164">使用目錄 ACL 以保護目錄。</span><span class="sxs-lookup"><span data-stu-id="80a2b-164">Use directory ACLs to secure directories.</span></span>  
  
## <a name="maximum-number-of-secure-sessions-for-a-service-is-reached"></a><span data-ttu-id="80a2b-165">達到服務之安全工作階段數上限</span><span class="sxs-lookup"><span data-stu-id="80a2b-165">Maximum Number of Secure Sessions for a Service Is Reached</span></span>  
 <span data-ttu-id="80a2b-166">當服務順利驗證用戶端而且是藉由服務建立安全工作階段時，服務會持續追蹤工作階段，直到用戶端取消服務或工作階段到期為止。</span><span class="sxs-lookup"><span data-stu-id="80a2b-166">When a client is successfully authenticated by a service and a secure session is established with the service, the service keeps track of the session until the client cancels it or the session expires.</span></span> <span data-ttu-id="80a2b-167">每個建立的工作階段都不利於服務之同時作用中工作階段的數量上限。</span><span class="sxs-lookup"><span data-stu-id="80a2b-167">Every established session counts against the limit for the maximum number of active simultaneous sessions with a service.</span></span> <span data-ttu-id="80a2b-168">達到這個限制時，將會拒絕嘗試以該服務建立新工作階段的用戶端，直到一或多個作用中工作階段到期或由用戶端所取消為止。</span><span class="sxs-lookup"><span data-stu-id="80a2b-168">When this limit is reached, clients that attempt to create a new session with that service are rejected until one or more active sessions expire or are canceled by a client.</span></span> <span data-ttu-id="80a2b-169">用戶端在服務中可以擁有多個工作階段，而且會對該限制計數每個工作階段。</span><span class="sxs-lookup"><span data-stu-id="80a2b-169">A client can have multiple sessions with a service, and each one of those sessions counts toward the limit.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="80a2b-170">當您使用具狀態的工作階段時，之前的段落就沒有作用。</span><span class="sxs-lookup"><span data-stu-id="80a2b-170">When you use stateful sessions, the previous paragraph does not apply.</span></span> <span data-ttu-id="80a2b-171">如需可設定狀態的工作階段的詳細資訊，請參閱[How to:建立安全性內容權杖的安全工作階段](../../../../docs/framework/wcf/feature-details/how-to-create-a-security-context-token-for-a-secure-session.md)。</span><span class="sxs-lookup"><span data-stu-id="80a2b-171">For more information about stateful sessions, see [How to: Create a Security Context Token for a Secure Session](../../../../docs/framework/wcf/feature-details/how-to-create-a-security-context-token-for-a-secure-session.md).</span></span>  
  
 <span data-ttu-id="80a2b-172">若要避免這個情況，請設定 <xref:System.ServiceModel.Channels.SecurityBindingElement> 類別的 <xref:System.ServiceModel.Channels.SecurityBindingElement> 屬性，以設定作用中工作階段數的上限和工作階段的最長存留時間。</span><span class="sxs-lookup"><span data-stu-id="80a2b-172">To mitigate this, set the limit for the maximum number of active sessions and the maximum lifetime for a session by setting the <xref:System.ServiceModel.Channels.SecurityBindingElement> property of the <xref:System.ServiceModel.Channels.SecurityBindingElement> class.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="80a2b-173">另請參閱</span><span class="sxs-lookup"><span data-stu-id="80a2b-173">See also</span></span>

- [<span data-ttu-id="80a2b-174">安全性考量</span><span class="sxs-lookup"><span data-stu-id="80a2b-174">Security Considerations</span></span>](../../../../docs/framework/wcf/feature-details/security-considerations-in-wcf.md)
- [<span data-ttu-id="80a2b-175">資訊洩漏</span><span class="sxs-lookup"><span data-stu-id="80a2b-175">Information Disclosure</span></span>](../../../../docs/framework/wcf/feature-details/information-disclosure.md)
- [<span data-ttu-id="80a2b-176">權限提高</span><span class="sxs-lookup"><span data-stu-id="80a2b-176">Elevation of Privilege</span></span>](../../../../docs/framework/wcf/feature-details/elevation-of-privilege.md)
- [<span data-ttu-id="80a2b-177">阻絕服務</span><span class="sxs-lookup"><span data-stu-id="80a2b-177">Denial of Service</span></span>](../../../../docs/framework/wcf/feature-details/denial-of-service.md)
- [<span data-ttu-id="80a2b-178">重新執行攻擊</span><span class="sxs-lookup"><span data-stu-id="80a2b-178">Replay Attacks</span></span>](../../../../docs/framework/wcf/feature-details/replay-attacks.md)
- [<span data-ttu-id="80a2b-179">竄改</span><span class="sxs-lookup"><span data-stu-id="80a2b-179">Tampering</span></span>](../../../../docs/framework/wcf/feature-details/tampering.md)
- [<span data-ttu-id="80a2b-180">不支援的案例</span><span class="sxs-lookup"><span data-stu-id="80a2b-180">Unsupported Scenarios</span></span>](../../../../docs/framework/wcf/feature-details/unsupported-scenarios.md)
