---
title: "可插式通訊協定簡介"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- data requests, pluggable protocols
- WebRequest class, pluggable protocols
- response to Internet request, pluggable protocols
- URI
- Windows Sockets
- request/response model
- sending data, pluggable protocols
- pluggable protocols
- WebClient class, about WebClient class
- pluggable protocols, about pluggable protocols
- Internet, pluggable protocols
- path identifiers
- Uniform Resource Identifier
- application development [.NET Framework], pluggable protocols
- requesting data from Internet, pluggable protocols
- receiving data, pluggable protocols
- protocols, pluggable
- server identifiers
- scheme identifiers
ms.assetid: 4b48e22d-e4e5-48f0-be80-d549bda97415
caps.latest.revision: "12"
author: mcleblanc
ms.author: markl
manager: markl
ms.workload: dotnet
ms.openlocfilehash: 3cc7ad6b6270b74e2eb6aa4a2cc3a540175d540b
ms.sourcegitcommit: 16186c34a957fdd52e5db7294f291f7530ac9d24
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 12/22/2017
---
# <a name="introducing-pluggable-protocols"></a><span data-ttu-id="fe0b8-102">可插式通訊協定簡介</span><span class="sxs-lookup"><span data-stu-id="fe0b8-102">Introducing Pluggable Protocols</span></span>
<span data-ttu-id="fe0b8-103">Microsoft .NET Framework 提供有層次、可擴充和網際網路服務的 Managed 實作，可以迅速而簡易地整合到您的應用程式。</span><span class="sxs-lookup"><span data-stu-id="fe0b8-103">The Microsoft .NET Framework provides a layered, extensible, and managed implementation of Internet services that can be integrated quickly and easily into your applications.</span></span> <span data-ttu-id="fe0b8-104"><xref:System.Net> 和 <xref:System.Net.Sockets> 命名空間中的網際網路存取類別，可用來實作 Web 架構和以網際網路為基礎的應用程式。</span><span class="sxs-lookup"><span data-stu-id="fe0b8-104">The Internet access classes in the <xref:System.Net> and <xref:System.Net.Sockets> namespaces can be used to implement both Web-based and Internet-based applications.</span></span>  
  
## <a name="internet-applications"></a><span data-ttu-id="fe0b8-105">網際網路應用程式</span><span class="sxs-lookup"><span data-stu-id="fe0b8-105">Internet Applications</span></span>  
 <span data-ttu-id="fe0b8-106">網際網路應用程式可以概分為兩類：要求資訊的用戶端應用程式，和回應用戶端資訊要求的伺服器應用程式。</span><span class="sxs-lookup"><span data-stu-id="fe0b8-106">Internet applications can be classified broadly into two kinds: client applications that request information and server applications that respond to information requests from clients.</span></span> <span data-ttu-id="fe0b8-107">傳統的網際網路用戶端/伺服器應用程式是全球資訊網，使用者使用瀏覽器在此存取儲存在全球網頁伺服器上的文件和其他資料。</span><span class="sxs-lookup"><span data-stu-id="fe0b8-107">The classic Internet client-server application is the World Wide Web, where people use browsers to access documents and other data stored on Web servers worldwide.</span></span>  
  
 <span data-ttu-id="fe0b8-108">應用程式並不限於其中一個角色。例如，熟悉的中介層應用程式伺服器回應用戶端要求的方法是向另一部伺服器要求資料，在此情況下，它同時擔任伺服器和用戶端。</span><span class="sxs-lookup"><span data-stu-id="fe0b8-108">Applications are not limited to just one of these roles; for instance, the familiar middle-tier application server responds to requests from clients by requesting data from another server, in which case it is acting as both a server and a client.</span></span>  
  
 <span data-ttu-id="fe0b8-109">用戶端應用程式透過識別要求的網際網路資源以及用於要求和回應的通訊協定，提出要求。</span><span class="sxs-lookup"><span data-stu-id="fe0b8-109">The client application makes a request by identifying the requested Internet resource and the communication protocol to use for the request and response.</span></span> <span data-ttu-id="fe0b8-110">必要時，用戶端也會提供完成要求所需的任何其他資料，例如 Proxy 位置或驗證資訊 (使用者名稱、密碼等等)。</span><span class="sxs-lookup"><span data-stu-id="fe0b8-110">If necessary, the client also provides any additional data required to complete the request, such as proxy location or authentication information (user name, password, and so on).</span></span> <span data-ttu-id="fe0b8-111">一旦形成要求，就可將要求傳送到伺服器。</span><span class="sxs-lookup"><span data-stu-id="fe0b8-111">Once the request is formed, the request can be sent to the server.</span></span>  
  
## <a name="identifying-resources"></a><span data-ttu-id="fe0b8-112">識別資源</span><span class="sxs-lookup"><span data-stu-id="fe0b8-112">Identifying Resources</span></span>  
 <span data-ttu-id="fe0b8-113">.NET Framework 使用統一資源識別碼 (URI)，識別所要求的網際網路資源與通訊協定。</span><span class="sxs-lookup"><span data-stu-id="fe0b8-113">The .NET Framework uses a Uniform Resource Identifier (URI) to identify the requested Internet resource and communication protocol.</span></span> <span data-ttu-id="fe0b8-114">URI 包含至少三個片段，可能四個：配置識別碼，識別要求和回應的通訊協定；伺服器識別碼，由網域名稱系統 (DNS) 主機名稱，或在網際網路上可唯一識別伺服器的 TCP 位址；路徑識別碼，找出伺服器上要求的資訊；以及選擇性查詢字串，將資訊從用戶端傳遞至伺服器。</span><span class="sxs-lookup"><span data-stu-id="fe0b8-114">The URI consists of at least three, and possibly four, fragments: the scheme identifier, which identifies the communications protocol for the request and response; the server identifier, which consists of either a Domain Name System (DNS) host name or a TCP address that uniquely identifies the server on the Internet; the path identifier, which locates the requested information on the server; and an optional query string, which passes information from the client to the server.</span></span> <span data-ttu-id="fe0b8-115">例如，URI "http://www.contoso.com/whatsnew.aspx?date=today" 的構成為配置識別碼 "http"、伺服器識別碼 "www.contoso.com"、路徑 "/whatsnew.aspx" 和查詢字串 "?date=today"。</span><span class="sxs-lookup"><span data-stu-id="fe0b8-115">For example, the URI "http://www.contoso.com/whatsnew.aspx?date=today" consists of the scheme identifier "http", the server identifier "www.contoso.com", the path "/whatsnew.aspx", and the query string "?date=today".</span></span>  
  
 <span data-ttu-id="fe0b8-116">伺服器收到要求並處理回應之後，它會將回應傳回到用戶端應用程式。</span><span class="sxs-lookup"><span data-stu-id="fe0b8-116">After the server has received the request and processed the response, it returns the response to the client application.</span></span> <span data-ttu-id="fe0b8-117">此回應包含補充資訊，例如內容類型 (例如，未經處理文字或 XML 資料)。</span><span class="sxs-lookup"><span data-stu-id="fe0b8-117">The response includes supplemental information, such as the type of the content (raw text or XML data, for example).</span></span>  
  
## <a name="requests-and-responses-in-the-net-framework"></a><span data-ttu-id="fe0b8-118">.NET Framework 中的要求和回應</span><span class="sxs-lookup"><span data-stu-id="fe0b8-118">Requests and Responses in the .NET Framework</span></span>  
 <span data-ttu-id="fe0b8-119">.NET Framework 使用特定的類別提供透過要求/回應模型存取網際網路資源的三段必要資訊：<xref:System.Uri> 類別，包含您所尋找之網際網路資源的 URI；<xref:System.Net.WebRequest> 類別，包含資源的要求；以及 <xref:System.Net.WebResponse> 類別，提供連入回應的容器。</span><span class="sxs-lookup"><span data-stu-id="fe0b8-119">The .NET Framework uses specific classes to provide the three pieces of information required to access Internet resources through a request/response model: the <xref:System.Uri> class, which contains the URI of the Internet resource you are seeking; the <xref:System.Net.WebRequest> class, which contains a request for the resource; and the <xref:System.Net.WebResponse> class, which provides a container for the incoming response.</span></span>  
  
 <span data-ttu-id="fe0b8-120">用戶端應用程式藉由將網路資源的 URI 傳遞到 <xref:System.Net.WebRequest.Create%2A> 方法，建立 `WebRequest` 執行個體。</span><span class="sxs-lookup"><span data-stu-id="fe0b8-120">Client applications create `WebRequest` instances by passing the URI of the network resource to the <xref:System.Net.WebRequest.Create%2A> method.</span></span> <span data-ttu-id="fe0b8-121">這個靜態方法會為特定的通訊協定建立 `WebRequest`，例如 HTTP。</span><span class="sxs-lookup"><span data-stu-id="fe0b8-121">This static method creates a `WebRequest` for a specific protocol, such as HTTP.</span></span> <span data-ttu-id="fe0b8-122">傳回的 `WebRequest` 可讓您存取屬性，同時控制伺服器的要求和提出要求時傳送的資料流存取。</span><span class="sxs-lookup"><span data-stu-id="fe0b8-122">The `WebRequest` that is returned provides access to properties that control both the request to the server and access to the data stream that is sent when the request is made.</span></span> <span data-ttu-id="fe0b8-123">`WebRequest` 上的 <xref:System.Net.WebRequest.GetResponse%2A> 方法會將要求從用戶端應用程式傳送至在 URI 中找到的伺服器。</span><span class="sxs-lookup"><span data-stu-id="fe0b8-123">The <xref:System.Net.WebRequest.GetResponse%2A> method on the `WebRequest` sends the request from the client application to the server identified in the URI.</span></span> <span data-ttu-id="fe0b8-124">如果回應可能延遲，則可在 **WebRequest** 上使用 <xref:System.Net.WebRequest.BeginGetResponse%2A> 方法以非同步方式提出要求，稍後使用 <xref:System.Net.WebRequest.EndGetResponse%2A> 方法傳回回應。</span><span class="sxs-lookup"><span data-stu-id="fe0b8-124">In cases in which the response might be delayed, the request can be made asynchronously using the <xref:System.Net.WebRequest.BeginGetResponse%2A> method on the **WebRequest**, and the response can be returned at a later time using the <xref:System.Net.WebRequest.EndGetResponse%2A> method.</span></span>  
  
 <span data-ttu-id="fe0b8-125">**GetResponse** 和 **EndGetResponse** 方法傳回的 **WebResponse**，可讓您存取伺服器傳回的資料。</span><span class="sxs-lookup"><span data-stu-id="fe0b8-125">The **GetResponse** and **EndGetResponse** methods return a **WebResponse** that provides access to the data returned by the server.</span></span> <span data-ttu-id="fe0b8-126">因為此資料是 <xref:System.Net.WebResponse.GetResponseStream%2A> 方法以資料流的形式提供給提出要求的應用程式，所以可用於應用程式中任何使用資料流的位置。</span><span class="sxs-lookup"><span data-stu-id="fe0b8-126">Because this data is provided to the requesting application as a stream by the <xref:System.Net.WebResponse.GetResponseStream%2A> method, it can be used in an application anywhere data streams are used.</span></span>  
  
 <span data-ttu-id="fe0b8-127">**WebRequest** 和 **WebResponse** 類別是可插式通訊協定的基礎：這是一項網路服務實作，可讓您開發應用程式使用網際網路資源，而不用擔心每項資源所使用的通訊協定特定詳細資料。</span><span class="sxs-lookup"><span data-stu-id="fe0b8-127">The **WebRequest** and **WebResponse** classes are the basis of pluggable protocols — an implementation of network services that enables you to develop applications that use Internet resources without worrying about the specific details of the protocol that each resource uses.</span></span> <span data-ttu-id="fe0b8-128">**WebRequest** 的子代類別是向 **WebRequest** 類別註冊，以管理建立網際網路資源實際連線的詳細資料。</span><span class="sxs-lookup"><span data-stu-id="fe0b8-128">Descendant classes of **WebRequest** are registered with the **WebRequest** class to manage the details of making the actual connections to Internet resources.</span></span>  
  
 <span data-ttu-id="fe0b8-129">例如，<xref:System.Net.HttpWebRequest> 類別管理使用 HTTP 連線到網際網路資源的詳細資料。</span><span class="sxs-lookup"><span data-stu-id="fe0b8-129">As an example, the <xref:System.Net.HttpWebRequest> class manages the details of connecting to an Internet resource using HTTP.</span></span> <span data-ttu-id="fe0b8-130">根據預設，當 **WebRequest.Create** 方法遇到開頭為 "http:" 或 "https:" (HTTP 與安全的 HTTP 通訊協定識別碼) 的 URI 時，傳回的 **WebRequest** 可依現況使用，或將類型轉換成 **HttpWebRequest** 以存取通訊協定特有的屬性。</span><span class="sxs-lookup"><span data-stu-id="fe0b8-130">By default, when the **WebRequest.Create** method encounters a URI that begins with "http:" or "https:" (the protocol identifiers for HTTP and secure HTTP), the **WebRequest** that is returned can be used as is, or it can be typecast to **HttpWebRequest** to access protocol-specific properties.</span></span> <span data-ttu-id="fe0b8-131">在大部分情況下，**WebRequest** 會提供提出要求的所有必要資訊。</span><span class="sxs-lookup"><span data-stu-id="fe0b8-131">In most cases, the **WebRequest** provides all the necessary information for making a request.</span></span>  
  
 <span data-ttu-id="fe0b8-132">可以要求/回應交易表示的任何通訊協定都可用於 **WebRequest**。</span><span class="sxs-lookup"><span data-stu-id="fe0b8-132">Any protocol that can be represented as a request/response transaction can be used in a **WebRequest**.</span></span> <span data-ttu-id="fe0b8-133">您也可以從 **WebRequest** 和 **WebResponse** 衍生通訊協定特定類別，然後註冊它們供應用程式搭配靜態 <xref:System.Net.WebRequest.RegisterPrefix%2A?displayProperty=nameWithType> 方法使用。</span><span class="sxs-lookup"><span data-stu-id="fe0b8-133">You can derive protocol-specific classes from **WebRequest** and **WebResponse** and then register them for use by the application with the static <xref:System.Net.WebRequest.RegisterPrefix%2A?displayProperty=nameWithType> method.</span></span>  
  
 <span data-ttu-id="fe0b8-134">當用於網際網路要求的用戶端驗證為必要時，**WebRequest** 的 <xref:System.Net.WebRequest.Credentials%2A> 屬性會提供所需的認證。</span><span class="sxs-lookup"><span data-stu-id="fe0b8-134">When client authorization for Internet requests is required, the <xref:System.Net.WebRequest.Credentials%2A> property of the **WebRequest** supplies the necessary credentials.</span></span> <span data-ttu-id="fe0b8-135">這些認證可以是基本 HTTP 或摘要式驗證的簡單名稱/密碼組，或者是 NTLM 或 Kerberos 驗證的名稱/密碼/網域集。</span><span class="sxs-lookup"><span data-stu-id="fe0b8-135">These credentials can be a simple name/password pair for basic HTTP or digest authentication, or a name/password/domain set for NTLM or Kerberos authentication.</span></span> <span data-ttu-id="fe0b8-136">一組認證可以儲存在 <xref:System.Net.NetworkCredential> 執行個體中，或多組認證同時儲存在 <xref:System.Net.CredentialCache> 執行個體中。</span><span class="sxs-lookup"><span data-stu-id="fe0b8-136">One set of credentials can be stored in a <xref:System.Net.NetworkCredential> instance, or multiple sets can be stored simultaneously in a <xref:System.Net.CredentialCache> instance.</span></span> <span data-ttu-id="fe0b8-137">**CredentialCache** 使用要求的 URI 和伺服器支援的驗證配置，以判斷要傳送到伺服器的認證。</span><span class="sxs-lookup"><span data-stu-id="fe0b8-137">The **CredentialCache** uses the URI of the request and the authentication scheme that the server supports to determine which credentials to send to the server.</span></span>  
  
## <a name="simple-requests-with-webclient"></a><span data-ttu-id="fe0b8-138">使用 WebClient 的簡單要求</span><span class="sxs-lookup"><span data-stu-id="fe0b8-138">Simple Requests with WebClient</span></span>  
 <span data-ttu-id="fe0b8-139">凡是需要提出網際網路資源簡單要求的應用程式，<xref:System.Net.WebClient> 類別都會提供常見方法，在網際網路伺服器上傳資料或下載資料。</span><span class="sxs-lookup"><span data-stu-id="fe0b8-139">For applications that need to make simple requests for Internet resources, the <xref:System.Net.WebClient> class provides common methods for uploading data to or downloading data from an Internet server.</span></span> <span data-ttu-id="fe0b8-140">**WebClient** 依賴 **WebRequest** 類別提供對網際網路資源的存取；因此，**WebClient** 類別可以使用任何已註冊的可插式通訊協定。</span><span class="sxs-lookup"><span data-stu-id="fe0b8-140">**WebClient** relies on the **WebRequest** class to provide access to Internet resources; therefore, the **WebClient** class can use any registered pluggable protocol.</span></span>  
  
 <span data-ttu-id="fe0b8-141">對於無法使用要求/回應模型的應用程式，或需要接聽網路以及傳送要求的應用程式，**System.Net.Sockets**命名空間會提供 <xref:System.Net.Sockets.TcpClient>、<xref:System.Net.Sockets.TcpListener> 和 <xref:System.Net.Sockets.UdpClient> 類別。</span><span class="sxs-lookup"><span data-stu-id="fe0b8-141">For applications that cannot use the request/response model, or for applications that need to listen on the network as well as send requests, the **System.Net.Sockets** namespace provides the <xref:System.Net.Sockets.TcpClient>, <xref:System.Net.Sockets.TcpListener>, and <xref:System.Net.Sockets.UdpClient> classes.</span></span> <span data-ttu-id="fe0b8-142">這些類別會處理使用不同的傳輸通訊協定建立連線的詳細資料，並將應用程式的網路連線公開為資料流。</span><span class="sxs-lookup"><span data-stu-id="fe0b8-142">These classes handle the details of making connections using different transport protocols and expose the network connection to the application as a stream.</span></span>  
  
 <span data-ttu-id="fe0b8-143">熟悉 Windows Sockets 介面的開發人員，或需要在通訊端層級由程式設計提供控制項的開發人員，會發現 **System.Net.Sockets** 類別符合他們的需要。</span><span class="sxs-lookup"><span data-stu-id="fe0b8-143">Developers familiar with the Windows Sockets interface or those who need the control provided by programming at the socket level will find that the **System.Net.Sockets** classes meet their needs.</span></span> <span data-ttu-id="fe0b8-144">**System.Net.Sockets** 類別是在 **System.Net** 類別內從 Managed 程式碼到原生程式碼的轉換點。</span><span class="sxs-lookup"><span data-stu-id="fe0b8-144">The **System.Net.Sockets** classes are a transition point from managed to native code within the **System.Net** classes.</span></span> <span data-ttu-id="fe0b8-145">在大部分情況下，**System.Net.Sockets** 類別會將資料封送處理到其 Windows 32 位元的對應項目，以及處理任何必要的安全性檢查。</span><span class="sxs-lookup"><span data-stu-id="fe0b8-145">In most cases, **System.Net.Sockets** classes marshal data into their Windows 32-bit counterparts, as well as handling any necessary security checks.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="fe0b8-146">請參閱</span><span class="sxs-lookup"><span data-stu-id="fe0b8-146">See Also</span></span>  
 [<span data-ttu-id="fe0b8-147">可插式通訊協定程式設計</span><span class="sxs-lookup"><span data-stu-id="fe0b8-147">Programming Pluggable Protocols</span></span>](../../../docs/framework/network-programming/programming-pluggable-protocols.md)  
 [<span data-ttu-id="fe0b8-148">以 .NET Framework 進行網路程式設計</span><span class="sxs-lookup"><span data-stu-id="fe0b8-148">Network Programming in the .NET Framework</span></span>](../../../docs/framework/network-programming/index.md)  
 [<span data-ttu-id="fe0b8-149">網路程式設計範例</span><span class="sxs-lookup"><span data-stu-id="fe0b8-149">Network Programming Samples</span></span>](../../../docs/framework/network-programming/network-programming-samples.md)  
 [<span data-ttu-id="fe0b8-150">MSDN Code Gallery 上的 .NET 網路範例</span><span class="sxs-lookup"><span data-stu-id="fe0b8-150">Networking Samples for .NET on MSDN Code Gallery</span></span>](http://code.msdn.microsoft.com/Wiki/View.aspx?ProjectName=nclsamples)
